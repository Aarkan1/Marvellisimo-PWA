{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/services/registerServiceWorker.js","webpack:///./src/services/stitch.js","webpack:///./src/views/homePage.js","webpack:///./src/components/searchListItem.js","webpack:///./src/libs/md5.js","webpack:///./src/services/marvelProvider.js","webpack:///./src/services/utilities.js","webpack:///./src/views/favoritesPage.js","webpack:///./src/views/receivedMessagesPage.js","webpack:///./src/views/friendsPage.js","webpack:///./src/views/searchPage.js","webpack:///./src/views/searchListPage.js","webpack:///./src/views/detailsPage.js","webpack:///./src/services/notifications.js","webpack:///./src/views/loginPage.js","webpack:///./src/views/missingPage.js","webpack:///./src/router/index.js","webpack:///./src/store/index.js","webpack:///./src/components/navbar.js","webpack:///./src/app.js","webpack:///./src/main.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","navigator","serviceWorker","getRegistrations","then","registrations","sw","unregister","Stitch","RemoteMongoClient","stitch","client","initializeDefaultAppClient","db","getServiceClient","factory","collUsers","collection","collSend","collSubs","template","this","$store","commit","props","computed","state","user","isChar","data","filter","charID","id","length","methods","list","isFavorited","splice","indexOf","includes","push","dispatch","$emit","$router","path","query","char","md5cycle","x","k","a","b","ff","gg","hh","ii","add32","cmn","q","md5blk","md5blks","charCodeAt","hex_chr","split","rhex","j","md5","join","hex","substring","tail","md51","y","lsw","PUBLIC_KEY","ts","Date","now","hash","async","getMarvels","charOrSerie","fromIDB","IDB","read","nameOrTitle","url","results","fetch","catch","json","idbData","write","sleep","ms","Promise","resolve","setTimeout","components","searchListItem","displayChar","favoriteCharacters","favoriteSeries","loadedLists","item","timeout","M","toast","html","classes","displayLength","timeoutDuration","all","map","serieID","flat","clearTimeout","messages","find","receiverId","auth","toArray","marvel","type","itemId","thumbnail","title","onlineFriends","friends","toSend","sendData","toUserId","insertOne","console","error","method","headers","body","JSON","stringify","username","content","friend","isOnline","uid","asArray","$route","searchHistory","searchTerm","term","forEach","localStorage","setItem","e","target","innerText","doSearch","parse","getItem","sort","updateTextFields","characterList","serieList","params","description","senderId","senderName","date","storedData","result","subToNotifications","window","Notification","requestPermission","log","ready","pushManager","getSubscription","publicKey","base64String","base64","repeat","replace","rawData","atob","outputArray","Uint8Array","urlBase64ToUint8Array","newSub","subscribe","userVisibleOnly","applicationServerKey","res","userId","subId","configPushSub","email","password","loggingIn","registered","UserPasswordCredential","credential","loginWithCredential","err","createNewUser","findOne","findOneAndReplace","idbSub","sub","userIds","UserPasswordAuthProviderClient","emailPasswordClient","getProviderClient","registerWithEmail","login","newUser","_id","BSON","ObjectId","isLoggedIn","location","pathname","router","VueRouter","routes","component","homePage","favoritesPage","loginPage","receivedMessagesPage","friendsPage","searchPage","searchListPage","detailsPage","missingPage","Vuex","Store","logo","mutations","actions","store","navbar","logout","AutoInit","eventBus","Vue","render","h","app","$mount"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","import { eventBus } from \"../main.js\";\r\n\r\nconst deployed = false\r\n\r\nif (deployed) {\r\n  if (\"serviceWorker\" in navigator) {\r\n    if (!navigator.serviceWorker.controller) {\r\n      navigator.serviceWorker.register(\"./serviceWorker.js\", {\r\n        scope: \"./\"\r\n      });\r\n    }\r\n  }\r\n\r\n  // window.addEventListener(\"beforeinstallprompt\", function (event) {\r\n  //   event.preventDefault();\r\n  //   window.installPrompt = event;\r\n  //   eventBus.$emit(\"installPromptFired\");\r\n  //   return false;\r\n  // });\r\n\r\n} else {\r\n  if (\"serviceWorker\" in navigator) {\r\n    navigator.serviceWorker.getRegistrations()\r\n      .then(registrations => {\r\n        for (let sw of registrations) {\r\n          sw.unregister();\r\n        }\r\n      });\r\n  }\r\n}\r\n","const {\r\n  Stitch,\r\n  RemoteMongoClient\r\n} = stitch\r\n\r\nexport const client = Stitch.initializeDefaultAppClient('marvellisimo-xebqg');\r\nexport const db = client.getServiceClient(RemoteMongoClient.factory, 'mongodb-atlas').db('marvellisimo');\r\nexport const collUsers = db.collection('users');\r\nexport const collSend = db.collection('send');\r\nexport const collSubs = db.collection('subs');\r\n","export default {\r\n  template: `\r\n  <div id=\"home\" class=\"container\">\r\n    <h1 class=\"marvel-logo\">Marvellisimo</h1>\r\n      \r\n    <router-link to=\"/search\">\r\n    <button class=\"menu-item btn-flat waves-effect waves-light\">\r\n      <i class=\"material-icons\">search</i>\r\n      <p>Search</p>\r\n    </button>\r\n    </router-link>\r\n    <router-link to=\"/received-messages\">\r\n    <button class=\"menu-item btn-flat waves-effect waves-light\">\r\n      <i class=\"material-icons\">chat</i>\r\n      <p>Received Messages</p>\r\n    </button>\r\n    </router-link>\r\n    <router-link to=\"/friends\">\r\n    <button class=\"menu-item btn-flat waves-effect waves-light\">\r\n      <i class=\"material-icons\">people_alt</i>\r\n      <p>Friends</p>\r\n    </button>\r\n    </router-link>\r\n    <router-link to=\"/favorites\">\r\n    <button class=\"menu-item btn-flat waves-effect waves-light\">\r\n      <i class=\"material-icons\">favorite_border</i>\r\n      <p>Favorites</p>\r\n    </button>\r\n    </router-link>\r\n  </div>\r\n  `,\r\n  created() {\r\n    this.$store.commit(\"setLogo\", \"Marvellisimo\");\r\n  }\r\n};\r\n","export default {\r\n  template: `\r\n    <div @click=\"goToDetails\" class=\"card small waves-effect waves-light\">\r\n      <div class=\"card-image\">\r\n        <img :src=\"data.thumbnail.path.replace('http://', 'https://') + '.' + data.thumbnail.extension\" />\r\n      </div>\r\n      <div class=\"card-content\">\r\n      <span class=\"card-title\">\r\n        {{ data.name || data.title }}\r\n      </span> \r\n      <i @click.stop=\"updateFavorite\" class=\"material-icons\">{{ isFavorited ? 'favorite' : 'favorite_border'}}</i>\r\n      </div>\r\n    </div>\r\n  `,\r\n  props: ['data', 'char'],\r\n  computed: {\r\n    isFavorited() {\r\n      if(!this.$store.state.user) return\r\n\r\n      let isChar = !!this.data.name\r\n      return this.$store.state.user[isChar ? 'favoriteCharacters' : 'favoriteSeries']\r\n        .filter(charID => charID == this.data.id).length > 0\r\n    }\r\n  },\r\n  methods: {\r\n    updateFavorite() {\r\n      let isChar = !!this.data.name\r\n      let list = this.$store.state.user[isChar ? 'favoriteCharacters' : 'favoriteSeries']\r\n      if(this.isFavorited) {\r\n        list.splice(list.indexOf(this.data.id), 1)\r\n      } else {\r\n        !list.includes(this.data.id) && list.push(this.data.id)\r\n      }\r\n      this.$store.dispatch('updateUser')\r\n      this.$emit('updateFavorite', this.data.id)\r\n    },\r\n    goToDetails() {\r\n      this.$router.push({\r\n        path: '/details/' + this.data.id,\r\n        query: {\r\n          char: this.char\r\n        }\r\n      })\r\n    }\r\n  }\r\n}","function md5cycle(x, k) {\nvar a = x[0], b = x[1], c = x[2], d = x[3];\n\na = ff(a, b, c, d, k[0], 7, -680876936);\nd = ff(d, a, b, c, k[1], 12, -389564586);\nc = ff(c, d, a, b, k[2], 17,  606105819);\nb = ff(b, c, d, a, k[3], 22, -1044525330);\na = ff(a, b, c, d, k[4], 7, -176418897);\nd = ff(d, a, b, c, k[5], 12,  1200080426);\nc = ff(c, d, a, b, k[6], 17, -1473231341);\nb = ff(b, c, d, a, k[7], 22, -45705983);\na = ff(a, b, c, d, k[8], 7,  1770035416);\nd = ff(d, a, b, c, k[9], 12, -1958414417);\nc = ff(c, d, a, b, k[10], 17, -42063);\nb = ff(b, c, d, a, k[11], 22, -1990404162);\na = ff(a, b, c, d, k[12], 7,  1804603682);\nd = ff(d, a, b, c, k[13], 12, -40341101);\nc = ff(c, d, a, b, k[14], 17, -1502002290);\nb = ff(b, c, d, a, k[15], 22,  1236535329);\n\na = gg(a, b, c, d, k[1], 5, -165796510);\nd = gg(d, a, b, c, k[6], 9, -1069501632);\nc = gg(c, d, a, b, k[11], 14,  643717713);\nb = gg(b, c, d, a, k[0], 20, -373897302);\na = gg(a, b, c, d, k[5], 5, -701558691);\nd = gg(d, a, b, c, k[10], 9,  38016083);\nc = gg(c, d, a, b, k[15], 14, -660478335);\nb = gg(b, c, d, a, k[4], 20, -405537848);\na = gg(a, b, c, d, k[9], 5,  568446438);\nd = gg(d, a, b, c, k[14], 9, -1019803690);\nc = gg(c, d, a, b, k[3], 14, -187363961);\nb = gg(b, c, d, a, k[8], 20,  1163531501);\na = gg(a, b, c, d, k[13], 5, -1444681467);\nd = gg(d, a, b, c, k[2], 9, -51403784);\nc = gg(c, d, a, b, k[7], 14,  1735328473);\nb = gg(b, c, d, a, k[12], 20, -1926607734);\n\na = hh(a, b, c, d, k[5], 4, -378558);\nd = hh(d, a, b, c, k[8], 11, -2022574463);\nc = hh(c, d, a, b, k[11], 16,  1839030562);\nb = hh(b, c, d, a, k[14], 23, -35309556);\na = hh(a, b, c, d, k[1], 4, -1530992060);\nd = hh(d, a, b, c, k[4], 11,  1272893353);\nc = hh(c, d, a, b, k[7], 16, -155497632);\nb = hh(b, c, d, a, k[10], 23, -1094730640);\na = hh(a, b, c, d, k[13], 4,  681279174);\nd = hh(d, a, b, c, k[0], 11, -358537222);\nc = hh(c, d, a, b, k[3], 16, -722521979);\nb = hh(b, c, d, a, k[6], 23,  76029189);\na = hh(a, b, c, d, k[9], 4, -640364487);\nd = hh(d, a, b, c, k[12], 11, -421815835);\nc = hh(c, d, a, b, k[15], 16,  530742520);\nb = hh(b, c, d, a, k[2], 23, -995338651);\n\na = ii(a, b, c, d, k[0], 6, -198630844);\nd = ii(d, a, b, c, k[7], 10,  1126891415);\nc = ii(c, d, a, b, k[14], 15, -1416354905);\nb = ii(b, c, d, a, k[5], 21, -57434055);\na = ii(a, b, c, d, k[12], 6,  1700485571);\nd = ii(d, a, b, c, k[3], 10, -1894986606);\nc = ii(c, d, a, b, k[10], 15, -1051523);\nb = ii(b, c, d, a, k[1], 21, -2054922799);\na = ii(a, b, c, d, k[8], 6,  1873313359);\nd = ii(d, a, b, c, k[15], 10, -30611744);\nc = ii(c, d, a, b, k[6], 15, -1560198380);\nb = ii(b, c, d, a, k[13], 21,  1309151649);\na = ii(a, b, c, d, k[4], 6, -145523070);\nd = ii(d, a, b, c, k[11], 10, -1120210379);\nc = ii(c, d, a, b, k[2], 15,  718787259);\nb = ii(b, c, d, a, k[9], 21, -343485551);\n\nx[0] = add32(a, x[0]);\nx[1] = add32(b, x[1]);\nx[2] = add32(c, x[2]);\nx[3] = add32(d, x[3]);\n\n}\n\nfunction cmn(q, a, b, x, s, t) {\na = add32(add32(a, q), add32(x, t));\nreturn add32((a << s) | (a >>> (32 - s)), b);\n}\n\nfunction ff(a, b, c, d, x, s, t) {\nreturn cmn((b & c) | ((~b) & d), a, b, x, s, t);\n}\n\nfunction gg(a, b, c, d, x, s, t) {\nreturn cmn((b & d) | (c & (~d)), a, b, x, s, t);\n}\n\nfunction hh(a, b, c, d, x, s, t) {\nreturn cmn(b ^ c ^ d, a, b, x, s, t);\n}\n\nfunction ii(a, b, c, d, x, s, t) {\nreturn cmn(c ^ (b | (~d)), a, b, x, s, t);\n}\n\nfunction md51(s) {\nlet txt = '';\nvar n = s.length,\nstate = [1732584193, -271733879, -1732584194, 271733878], i;\nfor (i=64; i<=s.length; i+=64) {\nmd5cycle(state, md5blk(s.substring(i-64, i)));\n}\ns = s.substring(i-64);\nvar tail = [0,0,0,0, 0,0,0,0, 0,0,0,0, 0,0,0,0];\nfor (i=0; i<s.length; i++)\ntail[i>>2] |= s.charCodeAt(i) << ((i%4) << 3);\ntail[i>>2] |= 0x80 << ((i%4) << 3);\nif (i > 55) {\nmd5cycle(state, tail);\nfor (i=0; i<16; i++) tail[i] = 0;\n}\ntail[14] = n*8;\nmd5cycle(state, tail);\nreturn state;\n}\n\n/* there needs to be support for Unicode here,\n * unless we pretend that we can redefine the MD-5\n * algorithm for multi-byte characters (perhaps\n * by adding every four 16-bit characters and\n * shortening the sum to 32 bits). Otherwise\n * I suggest performing MD-5 as if every character\n * was two bytes--e.g., 0040 0025 = @%--but then\n * how will an ordinary MD-5 sum be matched?\n * There is no way to standardize text to something\n * like UTF-8 before transformation; speed cost is\n * utterly prohibitive. The JavaScript standard\n * itself needs to look at this: it should start\n * providing access to strings as preformed UTF-8\n * 8-bit unsigned value arrays.\n */\nfunction md5blk(s) { /* I figured global was faster.   */\nvar md5blks = [], i; /* Andy King said do it this way. */\nfor (i=0; i<64; i+=4) {\nmd5blks[i>>2] = s.charCodeAt(i)\n+ (s.charCodeAt(i+1) << 8)\n+ (s.charCodeAt(i+2) << 16)\n+ (s.charCodeAt(i+3) << 24);\n}\nreturn md5blks;\n}\n\nvar hex_chr = '0123456789abcdef'.split('');\n\nfunction rhex(n)\n{\nvar s='', j=0;\nfor(; j<4; j++)\ns += hex_chr[(n >> (j * 8 + 4)) & 0x0F]\n+ hex_chr[(n >> (j * 8)) & 0x0F];\nreturn s;\n}\n\nfunction hex(x) {\nfor (var i=0; i<x.length; i++)\nx[i] = rhex(x[i]);\nreturn x.join('');\n}\n\nexport function md5(s) {\nreturn hex(md51(s));\n}\n\n/* this function is much faster,\nso if possible we use it. Some IEs\nare the only ones I know of that\nneed the idiotic second function,\ngenerated by an if clause.  */\n\nfunction add32(a, b) {\nreturn (a + b) & 0xFFFFFFFF;\n}\n\nif (md5('hello') != '5d41402abc4b2a76b9719d911017c592') {\nfunction add32(x, y) {\nvar lsw = (x & 0xFFFF) + (y & 0xFFFF),\nmsw = (x >> 16) + (y >> 16) + (lsw >> 16);\nreturn (msw << 16) | (lsw & 0xFFFF);\n}\n}\n","import { md5 } from '../libs/md5.js'\r\n\r\nconst PUBLIC_KEY = \"f5c6a6461fdefb8a6299942dc378c182\"\r\nconst PRIVATE_KEY = \"4488d6d52c2bcb9e6b1aca391d92b7e246b31f03\"\r\nconst BASE_URL = \"https://gateway.marvel.com:443/v1/public/\"\r\n\r\nlet ts = Date.now()\r\nlet hash = md5(ts + PRIVATE_KEY + PUBLIC_KEY)\r\n\r\nexport async function getMarvels(charOrSerie = 'characters', name = '', id = '') {\r\n\r\n  let fromIDB = await IDB.read('marvels', charOrSerie + (name || id))\r\n  if(fromIDB) return fromIDB.data\r\n\r\n  let nameOrTitle = charOrSerie == 'characters' ? '?name' : '?title'\r\n  nameOrTitle += 'StartsWith=' + name + '&'\r\n  if(!name) nameOrTitle = '?'\r\n\r\n  let url = BASE_URL + `${charOrSerie}${\r\n    id ? '/' + id : ''\r\n    }${nameOrTitle}orderBy=${\r\n      charOrSerie == 'characters' ? 'name' : 'title'\r\n    }&apikey=${PUBLIC_KEY}&ts=${ts}&hash=${hash}`\r\n  \r\n  let results = await fetch(url).catch()\r\n  results = await results.json()\r\n\r\n  let idbData = {\r\n    id: charOrSerie + (name || id),\r\n    data: results.data.results\r\n  }\r\n\r\n  await IDB.write('marvels', idbData)\r\n\r\n  return results.data.results\r\n}\r\n","export function sleep(ms) {\r\n  return new Promise(resolve => setTimeout(resolve, ms));\r\n}\r\n\r\nexport function urlBase64ToUint8Array(base64String) {\r\n  var padding = '='.repeat((4 - base64String.length % 4) % 4);\r\n  var base64 = (base64String + padding)\r\n    .replace(/\\-/g, '+')\r\n    .replace(/_/g, '/');\r\n\r\n  var rawData = window.atob(base64);\r\n  var outputArray = new Uint8Array(rawData.length);\r\n\r\n  for (var i = 0; i < rawData.length; ++i) {\r\n    outputArray[i] = rawData.charCodeAt(i);\r\n  }\r\n  return outputArray;\r\n}","import searchListItem from '../components/searchListItem.js'\r\nimport { getMarvels } from '../services/marvelProvider.js'\r\nimport { sleep } from '../services/utilities.js'\r\n\r\nexport default {\r\n  components: {\r\n    searchListItem\r\n  },\r\n  template: `\r\n  <div id=\"search-list-page\" class=\"container\">\r\n      <div class=\"switch\">\r\n        <label>\r\n          Series\r\n          <input v-model=\"displayChar\" type=\"checkbox\">\r\n          <span class=\"lever\"></span>\r\n          Characters\r\n        </label>\r\n      </div>\r\n      <div v-if=\"!loadedLists\" class=\"spinner\">\r\n      <div class=\"preloader-wrapper big active\">\r\n        <div class=\"spinner-layer spinner-yellow-only\">\r\n          <div class=\"circle-clipper left\">\r\n            <div class=\"circle\"></div>\r\n          </div><div class=\"gap-patch\">\r\n            <div class=\"circle\"></div>\r\n          </div><div class=\"circle-clipper right\">\r\n            <div class=\"circle\"></div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div v-else> \r\n        <searchListItem v-for=\"item in activeList\" :key=\"item.id\" :data=\"item\" :char=\"displayChar\" @updateFavorite=\"updateFavorite\" />\r\n      </div>\r\n    </div>\r\n  `,\r\n  data() {\r\n    return {\r\n      displayChar: true, \r\n      favoriteCharacters: [], \r\n      favoriteSeries: [],\r\n      loadedLists: false\r\n    }\r\n  },\r\n  computed: {\r\n    activeList() {\r\n      return this.displayChar ? this.favoriteCharacters : this.favoriteSeries \r\n    }\r\n  },\r\n  methods: {\r\n    updateFavorite(id) {\r\n      let list = this[this.displayChar ? 'favoriteCharacters' : 'favoriteSeries']\r\n      list.splice(list.indexOf(list.filter(item => item.id == id)[0]), 1)\r\n    }\r\n  },\r\n  async created() {\r\n    this.$store.commit(\"setLogo\", \"Favorites\")\r\n    while(!this.$store.state.user) await sleep(20)\r\n\r\n    this.timeout = setTimeout(() => {\r\n      M.toast({\r\n        html: '<div class=\"toast-text\">Loading timeout</div>', \r\n        classes: 'toast', \r\n        displayLength: 2000\r\n      })\r\n\r\n      this.$router.push(\"/\")\r\n    }, this.$store.state.timeoutDuration);\r\n\r\n    await Promise.all(this.$store.state.user.favoriteCharacters.map(async charID => this.favoriteCharacters.push(await getMarvels('characters', '', charID))))\r\n    await Promise.all(this.$store.state.user.favoriteSeries.map(async serieID => this.favoriteSeries.push(await getMarvels('series', '', serieID))))\r\n\r\n    this.favoriteCharacters = this.favoriteCharacters.flat()\r\n    this.favoriteSeries = this.favoriteSeries.flat()\r\n\r\n    clearTimeout(this.timeout)\r\n    this.loadedLists = true\r\n  }\r\n}\r\n","import { client, collSend } from '../services/stitch.js'\r\nimport { getMarvels } from '../services/marvelProvider.js'\r\n\r\nexport default {\r\n  template: `\r\n    <div id=\"recieved-messages-page\" class=\"container\">\r\n\r\n    <div v-if=\"!loadedLists\" class=\"spinner\">\r\n      <div class=\"preloader-wrapper big active\">\r\n        <div class=\"spinner-layer spinner-yellow-only\">\r\n          <div class=\"circle-clipper left\">\r\n            <div class=\"circle\"></div>\r\n          </div><div class=\"gap-patch\">\r\n            <div class=\"circle\"></div>\r\n          </div><div class=\"circle-clipper right\">\r\n            <div class=\"circle\"></div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div v-else class=\"hero-list\">  \r\n      <div v-for=\"message in messages\" \r\n      :key=\"message.itemId\" \r\n      @click=\"goToDetails(message.itemId, message.type == 'character')\" \r\n      class=\"list-item card small waves-effect waves-light recieved-message\">\r\n      <div class=\"card-image\">\r\n        <img v-if=\"message.thumbnail\" :src=\"message.thumbnail.path.replace('http://', 'https://') + '.' + message.thumbnail.extension\" />\r\n      </div>\r\n      <div class=\"card-content\">\r\n        <p>{{ message.name }}</p> \r\n        <p>Sender: {{ message.senderName }}</p>\r\n        <p>Sent: {{ new Date(message.date / 1).toLocaleString() }}</p>\r\n      </div>\r\n    </div>\r\n  </div>\r\n    </div>\r\n    `,\r\n    data() {\r\n      return {\r\n        messages: [],\r\n        loadedLists: false\r\n      }\r\n    },\r\n  methods: {\r\n    goToDetails(id, char) {\r\n      this.$router.push({\r\n        path: '/details/' + id,\r\n        query: {\r\n          char: char\r\n        }\r\n      })\r\n    }\r\n  },\r\n  async created() {\r\n    this.$store.commit(\"setLogo\", \"Received Messages\")\r\n    this.timeout = setTimeout(() => {\r\n      M.toast({\r\n        html: '<div class=\"toast-text\">Loading timeout</div>', \r\n        classes: 'toast', \r\n        displayLength: 2000\r\n      })\r\n\r\n      this.$router.push(\"/\")\r\n    }, this.$store.state.timeoutDuration);\r\n\r\n    // let fromIDB = await IDB.read('recieved-messages', client.auth.user.id)\r\n    // if(fromIDB) {\r\n    //   this.messages = fromIDB.data\r\n    // }\r\n    \r\n    this.messages = await collSend.find({ receiverId: client.auth.user.id }).toArray()\r\n\r\n    // if(!!fetched[0]) {\r\n    //   this.messages = fetched\r\n    //   let idbData = {\r\n    //     id: client.auth.user.id,\r\n    //     data: this.messages\r\n    //   }\r\n    //   await IDB.write('recieved-messages', idbData)\r\n    // }\r\n\r\n    this.messages = await Promise.all(this.messages.map(async m => {\r\n      let marvel = await getMarvels(m.type == 'character' ? 'characters' : 'series', '', m.itemId)\r\n      m.thumbnail = marvel[0].thumbnail\r\n      m.name = (marvel[0].name || marvel[0].title)\r\n      return m\r\n    }))\r\n    \r\n    clearTimeout(this.timeout)\r\n    this.loadedLists = true\r\n  }\r\n}","import { collUsers, collSend } from '../services/stitch.js'\r\n\r\nexport default {\r\n  template: `\r\n    <div id=\"friends-page\" class=\"container\">\r\n    <div class=\"switch\">\r\n      <label>\r\n        Offline\r\n        <input v-model=\"onlineFriends\" type=\"checkbox\">\r\n        <span class=\"lever\"></span>\r\n        Online\r\n      </label>\r\n    </div>\r\n      <h3>{{ onlineFriends ? 'Online' : 'Offline' }}</h3>\r\n\r\n      <div v-if=\"!loadedLists\" class=\"spinner\">\r\n      <div class=\"preloader-wrapper big active\">\r\n        <div class=\"spinner-layer spinner-yellow-only\">\r\n          <div class=\"circle-clipper left\">\r\n            <div class=\"circle\"></div>\r\n          </div><div class=\"gap-patch\">\r\n            <div class=\"circle\"></div>\r\n          </div><div class=\"circle-clipper right\">\r\n            <div class=\"circle\"></div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n      <ul v-else>\r\n        <li v-for=\"friend in filteredFriends\" \r\n        @click=\"sendMarvel(friend.uid)\"\r\n        :key=\"friend.uid\"\r\n        class=\"friend-username\"\r\n        >{{ friend.username }}</li>\r\n      </ul>\r\n    </div>\r\n  `,\r\n  data() {\r\n    return {\r\n      onlineFriends: true,\r\n      friends: [],\r\n      toSend: false,\r\n      sendData: null,\r\n      loadedLists: false\r\n    }\r\n  },\r\n  methods: {\r\n    async sendMarvel(toUserId) {\r\n      if(!this.sendData) return\r\n\r\n      this.sendData.receiverId = toUserId\r\n      await collSend.insertOne(this.sendData).catch(console.error)\r\n\r\n      fetch('/api/send-notifications/' + toUserId, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({\r\n          title: 'New marvel from ' + this.$store.state.user.username,\r\n          content: 'Check out this new marvel!',\r\n          url: '/recieved-messages'\r\n        })\r\n      })\r\n\r\n      M.toast({\r\n        html: '<div class=\"toast-text\">Sent Marvel</div>', \r\n        classes: 'toast', \r\n        displayLength: 2000\r\n      })\r\n\r\n      this.$router.push(\"/\")\r\n    }\r\n  },\r\n  computed: {\r\n    filteredFriends() {\r\n      return this.friends.filter(friend => friend.isOnline == this.onlineFriends && friend.uid != this.$store.state.user.uid)\r\n    }\r\n  },\r\n  async created() {\r\n    this.$store.commit(\"setLogo\", \"Friends\")\r\n    this.friends = await collUsers.find().asArray()\r\n\r\n    this.loadedLists = true\r\n\r\n    this.toSend = this.$route.query.toSend\r\n    this.sendData = this.$route.query.data\r\n  }\r\n}","export default {\r\n  template: `\r\n    <div id=\"search-page\">\r\n      <div class=\"row\">\r\n        <div class=\"input-field search col s10\">\r\n          <i class=\"material-icons prefix\">search</i>\r\n          <input id=\"icon_prefix\" autocomplete=\"off\" @keyup.enter=\"doSearch\" v-model=\"searchTerm\" type=\"text\">\r\n          <label for=\"icon_prefix\">Search</label>\r\n        </div>\r\n        <button class=\"btn-floating btn-large btn-flat\" @click=\"doSearch\"><i class=\"material-icons black-text\">image_search</i></button>\r\n      </div>\r\n\r\n      <ul class=\"seach-history\" @click=\"useSearchHistory\">\r\n        <li v-for=\"item of searchHistory\" :key=\"item.term\">{{ item.term }}</li>\r\n      </ul>\r\n    </div>\r\n  `,\r\n  data() {\r\n    return {\r\n      searchHistory: [],\r\n      searchTerm: ''\r\n    }\r\n  },\r\n  methods: {\r\n    doSearch(){\r\n      const inList = this.searchHistory.filter(item => item.term == this.searchTerm).length > 0\r\n\r\n      if(!inList) {\r\n        this.searchHistory.push({ \r\n          term: this.searchTerm,\r\n          ts: Date.now()\r\n        })\r\n      } else {\r\n        this.searchHistory.forEach(item => item.term == this.searchTerm && (item.ts = Date.now()))\r\n      }\r\n      localStorage.setItem(\"search-history\", JSON.stringify(this.searchHistory))\r\n      this.$router.push('/search/' + this.searchTerm)\r\n    },\r\n    useSearchHistory(e) {\r\n      this.searchTerm = e.target.innerText\r\n      this.doSearch()\r\n    }\r\n  },\r\n  created() {\r\n    this.$store.commit('setLogo', 'Search')\r\n    this.searchHistory = JSON.parse(localStorage.getItem(\"search-history\")) || []\r\n    this.searchHistory.sort((a, b) => a.ts > b.ts ? -1 : 1)\r\n\r\n    M.updateTextFields()\r\n  }\r\n}","import { getMarvels } from '../services/marvelProvider.js'\r\nimport searchListItem from '../components/searchListItem.js'\r\n\r\nexport default {\r\n  components: {\r\n    searchListItem\r\n  },\r\n  template: `\r\n    <div id=\"search-list-page\" class=\"container\">\r\n    <div class=\"switch\">\r\n      <label>\r\n        Series\r\n        <input v-model=\"displayChar\" type=\"checkbox\">\r\n        <span class=\"lever\"></span>\r\n        Characters\r\n      </label>\r\n    </div>\r\n    <div v-if=\"!loadedLists\" class=\"spinner\">\r\n      <div class=\"preloader-wrapper big active\">\r\n        <div class=\"spinner-layer spinner-yellow-only\">\r\n          <div class=\"circle-clipper left\">\r\n            <div class=\"circle\"></div>\r\n          </div><div class=\"gap-patch\">\r\n            <div class=\"circle\"></div>\r\n          </div><div class=\"circle-clipper right\">\r\n            <div class=\"circle\"></div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n      <div v-else class=\"hero-list\">\r\n        <searchListItem class=\"list-item\" v-for=\"item in activeList\" :key=\"item.id\" :data=\"item\" :char=\"displayChar\" />\r\n      </div>\r\n    </div>\r\n  `,\r\n  data() {\r\n    return {\r\n      displayChar: true,\r\n      loadedLists: false\r\n    }\r\n  },\r\n  computed: {\r\n    activeList() {\r\n      return this.displayChar ? this.$store.state.characterList : this.$store.state.serieList\r\n    }\r\n  },\r\n  async created() {\r\n    this.$store.commit('setLogo', this.$route.params.term)\r\n    this.timeout = setTimeout(() => {\r\n      M.toast({\r\n        html: '<div class=\"toast-text\">Loading timeout</div>', \r\n        classes: 'toast', \r\n        displayLength: 2000\r\n      })\r\n\r\n      this.$router.push(\"/\")\r\n    }, this.$store.state.timeoutDuration);\r\n    this.$store.commit('setCharList', await getMarvels('characters', this.$route.params.term))\r\n    this.$store.commit('setSerieList', await getMarvels('series', this.$route.params.term))\r\n\r\n    clearTimeout(this.timeout)\r\n    this.loadedLists = true\r\n  }\r\n}\r\n","import { getMarvels } from '../services/marvelProvider.js'\r\n\r\nexport default {\r\n  template: `\r\n    <div id=\"details-page\">\r\n      <div>\r\n        <img v-if=\"item.thumbnail\" :src=\"item.thumbnail.path.replace('http://', 'https://') + '.' + item.thumbnail.extension\" />\r\n      </div>\r\n      <h3 class=\"container\">{{ item.name || item.title }}</h3>\r\n      <p class=\"container\">{{ item.description }}</p>\r\n      <button @click=\"sendMarvel\" class=\"send-marvel-btn btn-floating blue darken-3 btn-large waves-effect waves-light\"><i class=\"material-icons\">send</i></button>\r\n    </div>\r\n  `,\r\n  data() {\r\n    return {\r\n      item: {\r\n        name: '',\r\n        description: ''\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    sendMarvel() {\r\n      let data = {\r\n        senderId: this.$store.state.user.uid, \r\n        itemId: '' + this.item.id,\r\n        type: this.$route.query.char ? \"character\" : \"serie\",\r\n        senderName: this.$store.state.user.username,\r\n        date: '' + Date.now()\r\n      }\r\n\r\n      this.$router.push({\r\n        path: '/friends',\r\n        query: {\r\n          toSend: true,\r\n          data\r\n        }\r\n      })\r\n    }\r\n  },\r\n  async created() {\r\n    let list = this.$store.state[this.$route.query.char ? 'characterList' : 'serieList']\r\n    let storedData = list.filter(item => item.id == this.$route.params.id)[0]\r\n    if(storedData) {\r\n      this.item = storedData\r\n      return\r\n    } \r\n\r\n    this.timeout = setTimeout(() => {\r\n      M.toast({\r\n        html: '<div class=\"toast-text\">Loading timeout</div>', \r\n        classes: 'toast', \r\n        displayLength: 2000\r\n      })\r\n\r\n      this.$router.push(\"/\")\r\n    }, this.$store.state.timeoutDuration);\r\n    \r\n    this.result = await getMarvels(this.$route.query.char ? 'characters' : 'series', '', this.$route.params.id)\r\n    this.item = this.result[0]\r\n\r\n    clearTimeout(this.timeout)\r\n    this.$store.commit(\"setLogo\", (this.item.name || this.item.title))\r\n  }\r\n}","import { urlBase64ToUint8Array } from './utilities.js'\r\nimport { client } from './stitch.js'\r\n\r\nexport async function subToNotifications() {\r\n  if('Notification' in window) {\r\n    Notification.requestPermission(async result => {\r\n      if(result !== 'granted') {\r\n        console.log('No notifications permitted!')\r\n      } else {\r\n        await configPushSub()\r\n      }\r\n    })\r\n  }\r\n}\r\n\r\nasync function configPushSub() {\r\n  if(!('serviceWorker' in navigator)) return\r\n  const sw = await navigator.serviceWorker.ready\r\n  const subs = await sw.pushManager.getSubscription()\r\n\r\n  if(subs == null) {\r\n    // create sub\r\n  \r\n    let publicKey = 'BAvY4M_56t_c_9SoNEIkxjjEcc_V55gO2Cm7GPZNHKwTZu2tHcXFiDScshESK29z_tT97I2MLOgNYQIhmyC-SDA'\r\n    publicKey = urlBase64ToUint8Array(publicKey)\r\n    let newSub = await sw.pushManager.subscribe({\r\n      userVisibleOnly: true,\r\n      applicationServerKey: publicKey\r\n    })\r\n\r\n    let res = await fetch('/api/subscriptions', {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify({\r\n        newSub,\r\n        userId: client.auth.user.id\r\n      })\r\n    })\r\n    res = await res.json()\r\n    console.log('sub id:', res.subId);\r\n    \r\n    await IDB.write('user-data', {\r\n      uid: 'sub-id',\r\n      id: res.subId\r\n    })\r\n  } else {\r\n    // have sub\r\n    // swNotification()\r\n  }\r\n}\r\n\r\nasync function swNotification() {\r\n  if('serviceWorker' in navigator) {\r\n    const sw = await navigator.serviceWorker.ready\r\n    const options = {\r\n      body: 'Test text in notification',\r\n      icon: '/src/assets/icons/icon-96x96.png',\r\n      badge: '/src/assets/icons/icon-96x96.png',\r\n      tag: 'new-message-notify',\r\n      renotify: false,\r\n      data: {\r\n        url: '/'\r\n      }\r\n    }\r\n    sw.showNotification('Notification from service worker', options)\r\n  }\r\n}","import { client, collUsers, collSubs } from '../services/stitch.js'\r\nimport { subToNotifications } from '../services/notifications.js'\r\n\r\nexport default {\r\n  template: `\r\n    <div id=\"login-page\" class=\"container\" autocomplete=\"off\">\r\n      <h1 class=\"marvel-logo\">Marvellisimo</h1>\r\n      <div class=\"input-field\">\r\n        <input id=\"username\" placeholder=\"Username\" v-model=\"username\" type=\"text\" class=\"validate\">\r\n      </div>\r\n      <div class=\"input-field\">\r\n        <input id=\"email\" placeholder=\"Email\" v-model=\"email\" type=\"email\" class=\"validate\">\r\n      </div>\r\n      <div class=\"input-field\">\r\n        <input id=\"password\" @keyup.enter.prevent.stop=\"login()\" placeholder=\"Password\" v-model=\"password\" type=\"password\" class=\"validate\">\r\n      </div>\r\n      <div class=\"login-buttons\">\r\n        <button class=\"btn\" @click.prevent.stop=\"login()\">login</button>\r\n        <button class=\"btn\" @click.prevent.stop=\"register()\">register</button>\r\n      </div>\r\n      <div v-if=\"loggingIn\" class=\"spinner login-spinner\">\r\n      <div class=\"preloader-wrapper big active\">\r\n        <div class=\"spinner-layer spinner-yellow-only\">\r\n          <div class=\"circle-clipper left\">\r\n            <div class=\"circle\"></div>\r\n          </div><div class=\"gap-patch\">\r\n            <div class=\"circle\"></div>\r\n          </div><div class=\"circle-clipper right\">\r\n            <div class=\"circle\"></div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    </div>\r\n  `,\r\n  data() {\r\n    return {\r\n      username: '',\r\n      email: '',\r\n      password: '',\r\n      loggingIn: false\r\n    }\r\n  },\r\n  methods: {\r\n    async login(registered) {\r\n      this.loggingIn = true\r\n      const { UserPasswordCredential } = stitch\r\n\r\n      const credential = new UserPasswordCredential(this.email, this.password)\r\n      const user = await client.auth.loginWithCredential(credential)\r\n      .catch(err => {\r\n        this.loggingIn = false\r\n        M.toast({\r\n          html: '<div class=\"toast-text\">Bad username/password</div>', \r\n          classes: 'toast', \r\n          displayLength: 2000\r\n        })\r\n        console.error(err)\r\n      })\r\n    \r\n      console.log(\"Signed in user:\", user)\r\n      let result;\r\n\r\n      if(registered) {\r\n        result =  await this.createNewUser(user.id)\r\n      } else {\r\n        result = await collUsers.findOne({ uid: client.auth.user.id })\r\n        .catch(err => {\r\n          console.error(err)\r\n        })\r\n        console.log(\"Found user:\", result)\r\n\r\n        result.isOnline = true\r\n        result && await collUsers.findOneAndReplace({ uid: result.uid }, result).catch(console.error)\r\n      }\r\n      \r\n      this.$store.commit('setUser', result)\r\n      this.$router.replace(\"/\")\r\n\r\n      await subToNotifications()\r\n      let idbSub = await IDB.read('user-data', 'sub-id')\r\n      if(idbSub) {\r\n        let sub = await collSubs.findOne({ uid: idbSub.id })\r\n        if(!sub.userIds.includes(client.auth.user.id)) sub.userIds.push(client.auth.user.id)\r\n        await collSubs.findOneAndReplace({ uid: idbSub.id }, sub).catch(console.error)\r\n      }\r\n    },\r\n    async register() {\r\n      const { UserPasswordAuthProviderClient } = stitch\r\n\r\n      const emailPasswordClient = client.auth.getProviderClient(UserPasswordAuthProviderClient.factory);\r\n    \r\n      const result = await emailPasswordClient.registerWithEmail(this.email, this.password)\r\n      .catch(err => {\r\n        M.toast({\r\n          html: '<div class=\"toast-text\">Bad username/password</div>', \r\n          classes: 'toast', \r\n          displayLength: 2000\r\n        })\r\n        console.error(\"Error registering new user:\", err)\r\n        return\r\n      })\r\n\r\n      M.toast({\r\n        html: '<div class=\"toast-text\">Successfully registered</div>', \r\n        classes: 'toast', \r\n        displayLength: 2000\r\n      })\r\n\r\n      this.login(true)\r\n    },\r\n    async createNewUser(id) {      \r\n      const newUser = {\r\n        _id: new stitch.BSON.ObjectId(id),\r\n        uid: id,\r\n        username: this.username,\r\n        email: this.email,\r\n        isOnline: true,\r\n        favoriteSeries: [],\r\n        favoriteCharacters: []\r\n      }\r\n\r\n      return await collUsers.insertOne(newUser)\r\n      .catch(err => {\r\n        console.error(\"Error creating new user:\", err)\r\n      })\r\n    }\r\n  },\r\n  created() {\r\n    console.log('Mounting LoginPage');\r\n    \r\n    if(client.auth.isLoggedIn) {\r\n      this.$router.replace(\"/\")\r\n    }\r\n  },\r\n  mounted() {\r\n    M.updateTextFields()\r\n  }\r\n}","export default {\r\n  template: `\r\n    <div id=\"missing-page\" class=\"container\">\r\n      <div class=\"row\">\r\n        <div class=\"one-half column\">\r\n          <h4>Missing Page</h4>\r\n          <p>Can't find the page: ${location.pathname}</p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  `,\r\n  created() {\r\n    this.$store.commit(\"setLogo\", \"Marvellisimo\")\r\n  },\r\n}\r\n","import homePage from '../views/homePage.js'\r\nimport favoritesPage from '../views/favoritesPage.js'\r\nimport receivedMessagesPage from '../views/receivedMessagesPage.js'\r\nimport friendsPage from '../views/friendsPage.js'\r\nimport searchPage from '../views/searchPage.js'\r\nimport searchListPage from '../views/searchListPage.js'\r\nimport detailsPage from '../views/detailsPage.js'\r\nimport loginPage from '../views/loginPage.js'\r\nimport missingPage from \"../views/missingPage.js\";\r\n\r\nexport const router = new VueRouter({\r\n  mode: 'history',\r\n  routes: [\r\n    {\r\n      name:\"home\",\r\n      path: '/', \r\n      component: homePage\r\n    },\r\n    {\r\n      name: \"favorites\",\r\n      path: '/favorites', \r\n      // component: () => import('../views/favoritesPage.js')\r\n      component: favoritesPage\r\n    },\r\n    {\r\n      name: \"login\",\r\n      path: '/login', \r\n      component: loginPage\r\n    },\r\n    {\r\n      name: \"receivedMessages\",\r\n      path: '/received-messages', \r\n      // component: () => import('../views/recievedMessagesPage.js')\r\n      component: receivedMessagesPage\r\n    },\r\n    {\r\n      name: \"friends\",\r\n      path: '/friends', \r\n      // component: () => import('../views/friendsPage.js')\r\n      component: friendsPage\r\n    },\r\n    {\r\n      name: \"searchPage\",\r\n      path: '/search', \r\n      // component: () => import('../views/searchPage.js')\r\n      component: searchPage\r\n    },\r\n    {\r\n      name: \"searchListPage\",\r\n      path: '/search/:term', \r\n      // component: () => import('../views/searchListPage.js')\r\n      component: searchListPage\r\n    },\r\n    {\r\n      name: \"detailsPage\",\r\n      path: '/details/:id', \r\n      // component: () => import('../views/detailsPage.js'),\r\n      component: detailsPage,\r\n      params: true\r\n    },\r\n    {\r\n      path: '*',\r\n      component: missingPage,\r\n    }\r\n  ]\r\n});","import { collUsers } from '../services/stitch.js'\r\n\r\nexport const store = new Vuex.Store({\r\n  state: {\r\n    timeoutDuration: 1000 * 5,\r\n    user: null,\r\n    logo: 'Marvellisimo',\r\n    characterList: [],\r\n    serieList: []\r\n  },\r\n  mutations: {\r\n    async setUser(state, user) {\r\n      state.user = {...user}\r\n      user && await IDB.write('user-data', user)\r\n\r\n      user && await IDB.write('user-data', {\r\n        uid: 'active-user',\r\n        id: user.uid || ''\r\n      })\r\n      localStorage['active-user'] = user.uid || ''\r\n    },   \r\n    setLogo(state, logo) {\r\n      state.logo = logo\r\n    },\r\n    setCharList(state, list) {\r\n      state.characterList = [...list]\r\n    },\r\n    setSerieList(state, list) {\r\n      state.serieList = [...list]\r\n    }\r\n  },\r\n  actions: {\r\n    async updateUser(store) {\r\n      store.state.user && await collUsers.findOneAndReplace({ uid: store.state.user.uid }, store.state.user).catch(console.error)\r\n      store.commit('setUser', store.state.user)\r\n    }\r\n  }\r\n})\r\n","import { client, collUsers } from '../services/stitch.js'\r\n\r\nexport default {\r\n  template: `\r\n  <div class=\"navbar-fixed\">\r\n    <nav class=\"nav-wrapper\">\r\n      <router-link v-if=\"showBackArrow\" to=\"/\"><i class=\"material-icons\">arrow_back</i></router-link>\r\n      <p v-else id=\"arrow-placeholder\"></p>\r\n      <h5>{{ $store.state.logo }}</h5>\r\n      <i class=\"material-icons\" @click=\"signOut()\">exit_to_app</i>\r\n    </nav>\r\n  </div>\r\n  `,\r\n  computed: {\r\n    showBackArrow() {\r\n      return this.$route.path != '/' && this.$route.path != '/login'\r\n    }\r\n  },\r\n  methods: {\r\n    async signOut() {\r\n      this.$store.state.user && (this.$store.state.user.isOnline = false)\r\n      this.$store.state.user && await collUsers.findOneAndReplace(\r\n        { uid: this.$store.state.user.uid },\r\n         this.$store.state.user\r\n        ).catch(console.error)\r\n\r\n      client.auth.logout()\r\n      this.$store.commit('setUser', null)\r\n      M.toast({\r\n        html: '<div class=\"toast-text\">Successfully signed out</div>', \r\n        classes: 'toast', \r\n        displayLength: 2000\r\n      })\r\n      this.$router.push(\"/login\")\r\n    }\r\n  }\r\n}","import navbar from './components/navbar.js'\r\nimport { client, collUsers } from './services/stitch.js'\r\n\r\nexport default {\r\n  components: {\r\n    navbar,\r\n  },\r\n  template: `\r\n    <div id=\"app\">\r\n      <navbar />\r\n      <main>\r\n        <transition enter-active-class=\"animated slideInUp\" mode=\"out-in\">  \r\n          <router-view class=\"animation-speed\" :key=\"$route.fullPath\" />\r\n        </transition>\r\n      </main>\r\n    </div>\r\n  `,\r\n  async created() {\r\n    M.AutoInit()\r\n\r\n    if(!client.auth.isLoggedIn) {\r\n      this.$router.replace(\"/login\")\r\n    } else {\r\n      let user = await IDB.read('user-data', client.auth.user.id)\r\n      console.log(user);\r\n      \r\n      this.$store.commit('setUser', user)\r\n\r\n      setTimeout(async () => {\r\n        user = await collUsers.findOne({ uid: client.auth.user.id }).catch(e => {\r\n          M.toast({\r\n            html: '<div class=\"toast-text\">Currently offline</div>', \r\n            classes: 'toast', \r\n            displayLength: 2000\r\n          })\r\n          return\r\n        })\r\n        if(!user) return\r\n        this.$store.commit('setUser', user)\r\n        user.isOnline = true\r\n        user && await collUsers.findOneAndReplace({ uid: user.uid }, user).catch(console.error)\r\n        M.toast({\r\n          html: '<div class=\"toast-text\">Successfully signed in</div>', \r\n          classes: 'toast', \r\n          displayLength: 2000\r\n        })\r\n      }, 50);\r\n    }\r\n  }\r\n}\r\n","import './services/registerServiceWorker.js'\r\nimport './services/stitch.js'\r\nimport { router } from './router/index.js'\r\nimport { store } from './store/index.js'\r\nimport app from './app.js'\r\n\r\nexport const eventBus = new Vue()\r\n\r\nnew Vue({\r\n  store,\r\n  router,\r\n  render: h => h(app)\r\n}).$mount('#app');\r\n"],"sourceRoot":""}