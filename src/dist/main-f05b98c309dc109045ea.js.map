{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/services/registerServiceWorker.js","webpack:///./src/services/stitch.js","webpack:///./src/views/homePage.js","webpack:///./src/components/searchListItem.js","webpack:///./src/libs/md5.js","webpack:///./src/services/marvelProvider.js","webpack:///./src/services/utilities.js","webpack:///./src/components/searchList.js","webpack:///./src/views/favoritesPage.js","webpack:///./src/views/receivedMessagesPage.js","webpack:///./src/views/friendsPage.js","webpack:///./src/views/searchPage.js","webpack:///./src/views/searchListPage.js","webpack:///./src/views/detailsPage.js","webpack:///./src/services/notifications.js","webpack:///./src/views/loginPage.js","webpack:///./src/views/missingPage.js","webpack:///./src/router/index.js","webpack:///./src/store/index.js","webpack:///./src/components/navbar.js","webpack:///./src/app.js","webpack:///./src/main.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","navigator","serviceWorker","controller","register","scope","Stitch","RemoteMongoClient","stitch","client","initializeDefaultAppClient","db","getServiceClient","factory","collUsers","collection","collSend","collSubs","template","this","$store","commit","props","computed","state","user","isChar","data","filter","charID","id","length","methods","list","isFavorited","splice","indexOf","includes","push","dispatch","$emit","$router","path","query","char","md5cycle","x","k","a","b","ff","gg","hh","ii","add32","cmn","q","md5blk","md5blks","charCodeAt","hex_chr","split","rhex","j","md5","join","hex","substring","tail","md51","y","lsw","PUBLIC_KEY","ts","Date","now","hash","async","getMarvels","charOrSerie","fromIDB","IDB","read","nameOrTitle","url","results","fetch","catch","json","idbData","write","sleep","ms","Promise","resolve","setTimeout","even","items","item","components","searchList","searchListItem","displayChar","favoriteCharacters","favoriteSeries","loadedLists","timeout","M","toast","html","classes","displayLength","timeoutDuration","all","map","serieID","flat","clearTimeout","messages","auth","console","log","find","receiverId","toArray","promisedMessages","marvel","type","itemId","thumbnail","title","onlineFriends","friends","toUserId","$route","toSend","sendData","dataToSend","dt","getTime","replace","Math","random","floor","toString","message","notify","username","content","window","sw","ready","sync","sendWithoutBackgroundSync","method","headers","body","JSON","stringify","friend","isOnline","uid","asArray","searchHistory","searchTerm","trim","term","forEach","localStorage","setItem","e","target","innerText","doSearch","parse","getItem","sort","updateTextFields","characterList","serieList","params","description","senderId","senderName","date","storedData","result","subToNotifications","Notification","requestPermission","pushManager","getSubscription","publicKey","base64String","base64","repeat","rawData","atob","outputArray","Uint8Array","urlBase64ToUint8Array","newSub","subscribe","userVisibleOnly","applicationServerKey","res","userId","subId","configPushSub","email","password","loggingIn","registered","UserPasswordCredential","credential","loginWithCredential","err","error","createNewUser","findOne","findOneAndReplace","idbSub","sub","userIds","UserPasswordAuthProviderClient","emailPasswordClient","getProviderClient","registerWithEmail","login","newUser","_id","BSON","ObjectId","insertOne","isLoggedIn","location","pathname","router","VueRouter","routes","component","homePage","favoritesPage","loginPage","receivedMessagesPage","friendsPage","searchPage","searchListPage","detailsPage","missingPage","Vuex","Store","logo","isMobile","mutations","mobile","actions","store","navbar","logout","AutoInit","Infinity","checkMobile","addEventListener","os","userAgent","innerWidth","f","document","classList","eventBus","Vue","render","h","app","$mount","toastElement","querySelector","Toast","getInstance","dismiss"],"mappings":"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","file":"main-f05b98c309dc109045ea.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","import { eventBus } from \"../main.js\";\r\n\r\nconst deployed = true\r\n\r\nif (deployed) {\r\n  if (\"serviceWorker\" in navigator) {\r\n    if (!navigator.serviceWorker.controller) {\r\n      navigator.serviceWorker.register(\"./serviceWorker.js\", {\r\n        scope: \"./\"\r\n      });\r\n    }\r\n  }\r\n\r\n  // window.addEventListener(\"beforeinstallprompt\", function (event) {\r\n  //   event.preventDefault();\r\n  //   window.installPrompt = event;\r\n  //   eventBus.$emit(\"installPromptFired\");\r\n  //   return false;\r\n  // });\r\n\r\n} else {\r\n  if (\"serviceWorker\" in navigator) {\r\n    navigator.serviceWorker.getRegistrations()\r\n      .then(registrations => {\r\n        for (let sw of registrations) {\r\n          sw.unregister();\r\n        }\r\n      });\r\n  }\r\n}\r\n","const {\r\n  Stitch,\r\n  RemoteMongoClient\r\n} = stitch\r\n\r\nexport const client = Stitch.initializeDefaultAppClient('marvellisimo-xebqg');\r\nexport const db = client.getServiceClient(RemoteMongoClient.factory, 'mongodb-atlas').db('marvellisimo');\r\nexport const collUsers = db.collection('users');\r\nexport const collSend = db.collection('send');\r\nexport const collSubs = db.collection('subs');\r\n","export default {\r\n  template: `\r\n  <div id=\"home\" class=\"container\">\r\n    <h1 class=\"marvel-logo\">Marvellisimo</h1>\r\n    <div class=\"page-buttons\">\r\n      <router-link to=\"/search\">\r\n      <button class=\"menu-item btn-flat waves-effect waves-light\">\r\n        <i class=\"material-icons\">search</i>\r\n        <p>Search</p>\r\n      </button>\r\n      </router-link>\r\n      <router-link to=\"/received-messages\">\r\n      <button class=\"menu-item btn-flat waves-effect waves-light\">\r\n        <i class=\"material-icons\">chat</i>\r\n        <p>Received Messages</p>\r\n      </button>\r\n      </router-link>\r\n      <router-link to=\"/friends\">\r\n      <button class=\"menu-item btn-flat waves-effect waves-light\">\r\n        <i class=\"material-icons\">people_alt</i>\r\n        <p>Friends</p>\r\n      </button>\r\n      </router-link>\r\n      <router-link to=\"/favorites\">\r\n      <button class=\"menu-item btn-flat waves-effect waves-light\">\r\n        <i class=\"material-icons\">favorite_border</i>\r\n        <p>Favorites</p>\r\n      </button>\r\n      </router-link>\r\n    </div>\r\n  </div>\r\n  `,\r\n  created() {\r\n    this.$store.commit(\"setLogo\", \"Marvellisimo\");\r\n  }\r\n};\r\n","export default {\r\n  template: `\r\n    <div @click=\"goToDetails\" class=\"card small waves-effect waves-light\">\r\n      <div class=\"card-image\">\r\n        <img \r\n          :key=\"data.id\"\r\n          :src=\"data.thumbnail.path.replace('http://', 'https://') + '.' + data.thumbnail.extension\" \r\n        />\r\n      </div>\r\n      <div class=\"card-content\">\r\n      <span class=\"card-title\">\r\n        {{ data.name || data.title }}\r\n      </span> \r\n      <i @click.stop=\"updateFavorite\" class=\"material-icons\">{{ isFavorited ? 'favorite' : 'favorite_border'}}</i>\r\n      </div>\r\n    </div>\r\n  `,\r\n  props: ['data', 'char'],\r\n  computed: {\r\n    isFavorited() {\r\n      if(!this.$store.state.user) return\r\n\r\n      let isChar = !!this.data.name\r\n      return this.$store.state.user[isChar ? 'favoriteCharacters' : 'favoriteSeries']\r\n        .filter(charID => charID == this.data.id).length > 0\r\n    }\r\n  },\r\n  methods: {\r\n    updateFavorite() {\r\n      let isChar = !!this.data.name\r\n      let list = this.$store.state.user[isChar ? 'favoriteCharacters' : 'favoriteSeries']\r\n      if(this.isFavorited) {\r\n        list.splice(list.indexOf(this.data.id), 1)\r\n      } else {\r\n        !list.includes(this.data.id) && list.push(this.data.id)\r\n      }\r\n      this.$store.dispatch('updateUser')\r\n      this.$emit('updateFavorite', this.data.id)\r\n    },\r\n    goToDetails() {\r\n      this.$router.push({\r\n        path: '/details/' + this.data.id,\r\n        query: {\r\n          char: this.char\r\n        }\r\n      })\r\n    }\r\n  }\r\n}","function md5cycle(x, k) {\r\nvar a = x[0], b = x[1], c = x[2], d = x[3];\r\n\r\na = ff(a, b, c, d, k[0], 7, -680876936);\r\nd = ff(d, a, b, c, k[1], 12, -389564586);\r\nc = ff(c, d, a, b, k[2], 17,  606105819);\r\nb = ff(b, c, d, a, k[3], 22, -1044525330);\r\na = ff(a, b, c, d, k[4], 7, -176418897);\r\nd = ff(d, a, b, c, k[5], 12,  1200080426);\r\nc = ff(c, d, a, b, k[6], 17, -1473231341);\r\nb = ff(b, c, d, a, k[7], 22, -45705983);\r\na = ff(a, b, c, d, k[8], 7,  1770035416);\r\nd = ff(d, a, b, c, k[9], 12, -1958414417);\r\nc = ff(c, d, a, b, k[10], 17, -42063);\r\nb = ff(b, c, d, a, k[11], 22, -1990404162);\r\na = ff(a, b, c, d, k[12], 7,  1804603682);\r\nd = ff(d, a, b, c, k[13], 12, -40341101);\r\nc = ff(c, d, a, b, k[14], 17, -1502002290);\r\nb = ff(b, c, d, a, k[15], 22,  1236535329);\r\n\r\na = gg(a, b, c, d, k[1], 5, -165796510);\r\nd = gg(d, a, b, c, k[6], 9, -1069501632);\r\nc = gg(c, d, a, b, k[11], 14,  643717713);\r\nb = gg(b, c, d, a, k[0], 20, -373897302);\r\na = gg(a, b, c, d, k[5], 5, -701558691);\r\nd = gg(d, a, b, c, k[10], 9,  38016083);\r\nc = gg(c, d, a, b, k[15], 14, -660478335);\r\nb = gg(b, c, d, a, k[4], 20, -405537848);\r\na = gg(a, b, c, d, k[9], 5,  568446438);\r\nd = gg(d, a, b, c, k[14], 9, -1019803690);\r\nc = gg(c, d, a, b, k[3], 14, -187363961);\r\nb = gg(b, c, d, a, k[8], 20,  1163531501);\r\na = gg(a, b, c, d, k[13], 5, -1444681467);\r\nd = gg(d, a, b, c, k[2], 9, -51403784);\r\nc = gg(c, d, a, b, k[7], 14,  1735328473);\r\nb = gg(b, c, d, a, k[12], 20, -1926607734);\r\n\r\na = hh(a, b, c, d, k[5], 4, -378558);\r\nd = hh(d, a, b, c, k[8], 11, -2022574463);\r\nc = hh(c, d, a, b, k[11], 16,  1839030562);\r\nb = hh(b, c, d, a, k[14], 23, -35309556);\r\na = hh(a, b, c, d, k[1], 4, -1530992060);\r\nd = hh(d, a, b, c, k[4], 11,  1272893353);\r\nc = hh(c, d, a, b, k[7], 16, -155497632);\r\nb = hh(b, c, d, a, k[10], 23, -1094730640);\r\na = hh(a, b, c, d, k[13], 4,  681279174);\r\nd = hh(d, a, b, c, k[0], 11, -358537222);\r\nc = hh(c, d, a, b, k[3], 16, -722521979);\r\nb = hh(b, c, d, a, k[6], 23,  76029189);\r\na = hh(a, b, c, d, k[9], 4, -640364487);\r\nd = hh(d, a, b, c, k[12], 11, -421815835);\r\nc = hh(c, d, a, b, k[15], 16,  530742520);\r\nb = hh(b, c, d, a, k[2], 23, -995338651);\r\n\r\na = ii(a, b, c, d, k[0], 6, -198630844);\r\nd = ii(d, a, b, c, k[7], 10,  1126891415);\r\nc = ii(c, d, a, b, k[14], 15, -1416354905);\r\nb = ii(b, c, d, a, k[5], 21, -57434055);\r\na = ii(a, b, c, d, k[12], 6,  1700485571);\r\nd = ii(d, a, b, c, k[3], 10, -1894986606);\r\nc = ii(c, d, a, b, k[10], 15, -1051523);\r\nb = ii(b, c, d, a, k[1], 21, -2054922799);\r\na = ii(a, b, c, d, k[8], 6,  1873313359);\r\nd = ii(d, a, b, c, k[15], 10, -30611744);\r\nc = ii(c, d, a, b, k[6], 15, -1560198380);\r\nb = ii(b, c, d, a, k[13], 21,  1309151649);\r\na = ii(a, b, c, d, k[4], 6, -145523070);\r\nd = ii(d, a, b, c, k[11], 10, -1120210379);\r\nc = ii(c, d, a, b, k[2], 15,  718787259);\r\nb = ii(b, c, d, a, k[9], 21, -343485551);\r\n\r\nx[0] = add32(a, x[0]);\r\nx[1] = add32(b, x[1]);\r\nx[2] = add32(c, x[2]);\r\nx[3] = add32(d, x[3]);\r\n\r\n}\r\n\r\nfunction cmn(q, a, b, x, s, t) {\r\na = add32(add32(a, q), add32(x, t));\r\nreturn add32((a << s) | (a >>> (32 - s)), b);\r\n}\r\n\r\nfunction ff(a, b, c, d, x, s, t) {\r\nreturn cmn((b & c) | ((~b) & d), a, b, x, s, t);\r\n}\r\n\r\nfunction gg(a, b, c, d, x, s, t) {\r\nreturn cmn((b & d) | (c & (~d)), a, b, x, s, t);\r\n}\r\n\r\nfunction hh(a, b, c, d, x, s, t) {\r\nreturn cmn(b ^ c ^ d, a, b, x, s, t);\r\n}\r\n\r\nfunction ii(a, b, c, d, x, s, t) {\r\nreturn cmn(c ^ (b | (~d)), a, b, x, s, t);\r\n}\r\n\r\nfunction md51(s) {\r\nlet txt = '';\r\nvar n = s.length,\r\nstate = [1732584193, -271733879, -1732584194, 271733878], i;\r\nfor (i=64; i<=s.length; i+=64) {\r\nmd5cycle(state, md5blk(s.substring(i-64, i)));\r\n}\r\ns = s.substring(i-64);\r\nvar tail = [0,0,0,0, 0,0,0,0, 0,0,0,0, 0,0,0,0];\r\nfor (i=0; i<s.length; i++)\r\ntail[i>>2] |= s.charCodeAt(i) << ((i%4) << 3);\r\ntail[i>>2] |= 0x80 << ((i%4) << 3);\r\nif (i > 55) {\r\nmd5cycle(state, tail);\r\nfor (i=0; i<16; i++) tail[i] = 0;\r\n}\r\ntail[14] = n*8;\r\nmd5cycle(state, tail);\r\nreturn state;\r\n}\r\n\r\n/* there needs to be support for Unicode here,\r\n * unless we pretend that we can redefine the MD-5\r\n * algorithm for multi-byte characters (perhaps\r\n * by adding every four 16-bit characters and\r\n * shortening the sum to 32 bits). Otherwise\r\n * I suggest performing MD-5 as if every character\r\n * was two bytes--e.g., 0040 0025 = @%--but then\r\n * how will an ordinary MD-5 sum be matched?\r\n * There is no way to standardize text to something\r\n * like UTF-8 before transformation; speed cost is\r\n * utterly prohibitive. The JavaScript standard\r\n * itself needs to look at this: it should start\r\n * providing access to strings as preformed UTF-8\r\n * 8-bit unsigned value arrays.\r\n */\r\nfunction md5blk(s) { /* I figured global was faster.   */\r\nvar md5blks = [], i; /* Andy King said do it this way. */\r\nfor (i=0; i<64; i+=4) {\r\nmd5blks[i>>2] = s.charCodeAt(i)\r\n+ (s.charCodeAt(i+1) << 8)\r\n+ (s.charCodeAt(i+2) << 16)\r\n+ (s.charCodeAt(i+3) << 24);\r\n}\r\nreturn md5blks;\r\n}\r\n\r\nvar hex_chr = '0123456789abcdef'.split('');\r\n\r\nfunction rhex(n)\r\n{\r\nvar s='', j=0;\r\nfor(; j<4; j++)\r\ns += hex_chr[(n >> (j * 8 + 4)) & 0x0F]\r\n+ hex_chr[(n >> (j * 8)) & 0x0F];\r\nreturn s;\r\n}\r\n\r\nfunction hex(x) {\r\nfor (var i=0; i<x.length; i++)\r\nx[i] = rhex(x[i]);\r\nreturn x.join('');\r\n}\r\n\r\nexport function md5(s) {\r\nreturn hex(md51(s));\r\n}\r\n\r\n/* this function is much faster,\r\nso if possible we use it. Some IEs\r\nare the only ones I know of that\r\nneed the idiotic second function,\r\ngenerated by an if clause.  */\r\n\r\nfunction add32(a, b) {\r\nreturn (a + b) & 0xFFFFFFFF;\r\n}\r\n\r\nif (md5('hello') != '5d41402abc4b2a76b9719d911017c592') {\r\nfunction add32(x, y) {\r\nvar lsw = (x & 0xFFFF) + (y & 0xFFFF),\r\nmsw = (x >> 16) + (y >> 16) + (lsw >> 16);\r\nreturn (msw << 16) | (lsw & 0xFFFF);\r\n}\r\n}\r\n","import { md5 } from '../libs/md5.js'\r\n\r\nconst PUBLIC_KEY = \"f5c6a6461fdefb8a6299942dc378c182\"\r\nconst PRIVATE_KEY = \"4488d6d52c2bcb9e6b1aca391d92b7e246b31f03\"\r\nconst BASE_URL = \"https://gateway.marvel.com:443/v1/public/\"\r\n\r\nlet ts = Date.now()\r\nlet hash = md5(ts + PRIVATE_KEY + PUBLIC_KEY)\r\n\r\nexport async function getMarvels(charOrSerie = 'characters', name = '', id = '') {\r\n\r\n  let fromIDB = await IDB.read('marvels', charOrSerie + (name || id))\r\n  if(fromIDB) return fromIDB.data\r\n\r\n  let nameOrTitle = charOrSerie == 'characters' ? '?name' : '?title'\r\n  nameOrTitle += 'StartsWith=' + name + '&'\r\n  if(!name) nameOrTitle = '?'\r\n\r\n  let url = BASE_URL + `${charOrSerie}${\r\n    id ? '/' + id : ''\r\n    }${nameOrTitle}orderBy=${\r\n      charOrSerie == 'characters' ? 'name' : 'title'\r\n    }&apikey=${PUBLIC_KEY}&ts=${ts}&hash=${hash}`\r\n  \r\n  let results = await fetch(url).catch()\r\n  results = await results.json()\r\n\r\n  let idbData = {\r\n    id: charOrSerie + (name || id),\r\n    data: results.data.results\r\n  }\r\n\r\n  await IDB.write('marvels', idbData)\r\n\r\n  return results.data.results\r\n}\r\n","export function sleep(ms) {\r\n  return new Promise(resolve => setTimeout(resolve, ms));\r\n}\r\n\r\nexport function urlBase64ToUint8Array(base64String) {\r\n  var padding = '='.repeat((4 - base64String.length % 4) % 4);\r\n  var base64 = (base64String + padding)\r\n    .replace(/\\-/g, '+')\r\n    .replace(/_/g, '/');\r\n\r\n  var rawData = window.atob(base64);\r\n  var outputArray = new Uint8Array(rawData.length);\r\n\r\n  for (var i = 0; i < rawData.length; ++i) {\r\n    outputArray[i] = rawData.charCodeAt(i);\r\n  }\r\n  return outputArray;\r\n}\r\n\r\nexport const uuid = () => {\r\n  var dt = new Date().getTime();\r\n  var uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\r\n      var r = (dt + Math.random()*16)%16 | 0;\r\n      dt = Math.floor(dt/16);\r\n      return (c=='x' ? r :(r&0x3|0x8)).toString(16);\r\n  });\r\n  return uuid;\r\n}","export default {\r\n  template: `\r\n  <div v-if=\"$store.state.isMobile\">  \r\n    <RecycleScroller\r\n    class=\"scroller\"\r\n    :items=\"items\"\r\n    :item-size=\"140\"\r\n    :key-field=\"keyField\"\r\n    page-mode\r\n    v-slot=\"{ item }\"\r\n    >\r\n    <slot :item=\"item\"></slot>\r\n  </RecycleScroller>\r\n  </div>\r\n  <div v-else class=\"desktop-list\">  \r\n    <RecycleScroller\r\n    class=\"scroller\"\r\n    :items=\"getList(1)\"\r\n    :item-size=\"140\"\r\n    :key-field=\"keyField\"\r\n    page-mode\r\n    v-slot=\"{ item }\"\r\n    >\r\n    <slot :item=\"item\"></slot>\r\n  </RecycleScroller>\r\n  <RecycleScroller\r\n    class=\"scroller\"\r\n    :items=\"getList()\"\r\n    :item-size=\"140\"\r\n    :key-field=\"keyField\"\r\n    page-mode\r\n    v-slot=\"{ item }\"\r\n    >\r\n      <slot :item=\"item\"></slot>\r\n    </RecycleScroller>\r\n  </div>\r\n  `,\r\n  props: ['items', 'keyField'],\r\n  // computed: {\r\n  //   keyField() {\r\n  //     return this.items[0]._id ? '_id' : 'id'\r\n  //   }\r\n  // },\r\n  methods: {\r\n    getList(even) {\r\n      if(even) {\r\n        return this.items.filter((item, i) => i % 2 === 0)\r\n      } else {\r\n        return this.items.filter((item, i) => i % 2 !== 0)\r\n      }\r\n    }\r\n  }\r\n}","import searchListItem from '../components/searchListItem.js'\r\nimport { getMarvels } from '../services/marvelProvider.js'\r\nimport { sleep } from '../services/utilities.js'\r\nimport searchList from '../components/searchList.js'\r\n\r\nexport default {\r\n  components: {\r\n    searchList,\r\n    searchListItem\r\n  },\r\n  template: `\r\n  <div id=\"search-list-page\" class=\"container\">\r\n      <div class=\"switch\">\r\n        <label>\r\n          Series\r\n          <input v-model=\"displayChar\" type=\"checkbox\">\r\n          <span class=\"lever\"></span>\r\n          Characters\r\n        </label>\r\n      </div>\r\n      <div v-if=\"!loadedLists\" class=\"spinner\">\r\n      <div class=\"preloader-wrapper big active\">\r\n        <div class=\"spinner-layer spinner-yellow-only\">\r\n          <div class=\"circle-clipper left\">\r\n            <div class=\"circle\"></div>\r\n          </div><div class=\"gap-patch\">\r\n            <div class=\"circle\"></div>\r\n          </div><div class=\"circle-clipper right\">\r\n            <div class=\"circle\"></div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div v-else> \r\n      <searchList\r\n        :items=\"activeList\"\r\n        :keyField=\"'id'\"\r\n        v-slot=\"{ item }\"\r\n      >\r\n        <searchListItem class=\"list-item\" :data=\"item\" :char=\"displayChar\" @updateFavorite=\"updateFavorite\"/>\r\n      </searchList> \r\n    </div>\r\n  </div>\r\n  `,\r\n  data() {\r\n    return {\r\n      displayChar: true, \r\n      favoriteCharacters: [], \r\n      favoriteSeries: [],\r\n      loadedLists: false\r\n    }\r\n  },\r\n  computed: {\r\n    activeList() {\r\n      return this.displayChar ? this.favoriteCharacters : this.favoriteSeries \r\n    }\r\n  },\r\n  methods: {\r\n    updateFavorite(id) {\r\n      let list = this[this.displayChar ? 'favoriteCharacters' : 'favoriteSeries']\r\n      list.splice(list.indexOf(list.filter(item => item.id == id)[0]), 1)\r\n    }\r\n  },\r\n  async created() {\r\n    this.$store.commit(\"setLogo\", \"Favorites\")\r\n    while(!this.$store.state.user) await sleep(20)\r\n\r\n    this.timeout = setTimeout(() => {\r\n      M.toast({\r\n        html: '<div class=\"toast-text\">Loading timeout</div>', \r\n        classes: 'toast', \r\n        displayLength: 2000\r\n      })\r\n\r\n      this.$router.push(\"/\")\r\n    }, this.$store.state.timeoutDuration);\r\n\r\n    await Promise.all(\r\n      this.$store.state.user.favoriteCharacters\r\n      .map(async charID => this.favoriteCharacters.push(\r\n          await getMarvels('characters', '', charID)\r\n        )\r\n      ))\r\n    await Promise.all(\r\n      this.$store.state.user.favoriteSeries\r\n      .map(async serieID => this.favoriteSeries.push(\r\n          await getMarvels('series', '', serieID)\r\n        )\r\n      ))\r\n\r\n    this.favoriteCharacters = this.favoriteCharacters.flat()\r\n    this.favoriteSeries = this.favoriteSeries.flat()\r\n\r\n    clearTimeout(this.timeout)\r\n    this.loadedLists = true\r\n  }\r\n}\r\n","import { client, collSend } from '../services/stitch.js'\r\nimport { getMarvels } from '../services/marvelProvider.js'\r\nimport searchList from '../components/searchList.js'\r\n\r\nexport default {\r\n  components: {\r\n    searchList\r\n  },\r\n  template: `\r\n    <div id=\"recieved-messages-page\" class=\"container\">\r\n\r\n    <div v-if=\"!loadedLists\" class=\"spinner\">\r\n      <div class=\"preloader-wrapper big active\">\r\n        <div class=\"spinner-layer spinner-yellow-only\">\r\n          <div class=\"circle-clipper left\">\r\n            <div class=\"circle\"></div>\r\n          </div><div class=\"gap-patch\">\r\n            <div class=\"circle\"></div>\r\n          </div><div class=\"circle-clipper right\">\r\n            <div class=\"circle\"></div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div v-else class=\"hero-list\">  \r\n\r\n    <searchList \r\n      :items=\"messages\"\r\n      :keyField=\"'_id'\" \r\n      v-slot=\"{ item }\">\r\n      <div \r\n        @click=\"goToDetails(item.itemId, item.type == 'character')\" \r\n        class=\"list-item card small waves-effect waves-light recieved-message\"\r\n      >\r\n        <div class=\"card-image\">\r\n          <img \r\n            v-if=\"item.thumbnail\" \r\n            :src=\"item.thumbnail.path.replace('http://', 'https://') + '.' + item.thumbnail.extension\"\r\n            :key=\"item._id\"\r\n          />\r\n        </div>\r\n        <div class=\"card-content\">\r\n          <p>{{ item.name }}</p> \r\n          <p>Sender: {{ item.senderName }}</p>\r\n          <p>Sent: {{ new Date(item.date / 1).toLocaleString() }}</p>\r\n        </div>\r\n      </div>\r\n    </searchList>\r\n  </div>\r\n    </div>\r\n    `,\r\n    data() {\r\n      return {\r\n        messages: [],\r\n        loadedLists: false\r\n      }\r\n    },\r\n  methods: {\r\n    goToDetails(id, char) {\r\n      this.$router.push({\r\n        path: '/details/' + id,\r\n        query: {\r\n          char: char\r\n        }\r\n      })\r\n    }\r\n  },\r\n  async created() {\r\n    this.$store.commit(\"setLogo\", \"Received Messages\")\r\n    this.timeout = setTimeout(() => {\r\n      M.toast({\r\n        html: '<div class=\"toast-text\">Loading timeout</div>', \r\n        classes: 'toast', \r\n        displayLength: 2000\r\n      })\r\n\r\n      this.$router.push(\"/\")\r\n    }, this.$store.state.timeoutDuration);\r\n\r\n    let fromIDB = await IDB.read('received-messages', client.auth.user.id)\r\n    console.log(fromIDB);\r\n    if(fromIDB) {\r\n      this.messages = fromIDB.data\r\n    } else { \r\n      this.messages = await collSend.find({ receiverId: client.auth.user.id }).toArray()\r\n      console.log(this.messages);\r\n      \r\n      let idbData = {\r\n        id: client.auth.user.id,\r\n        data: this.messages\r\n      }\r\n      await IDB.write('received-messages', idbData)\r\n    }\r\n\r\n    let promisedMessages = []\r\n\r\n    await Promise.all(this.messages.map(async m => {\r\n      let marvel = await getMarvels(m.type == 'character' ? 'characters' : 'series', '', m.itemId)\r\n      m.thumbnail = marvel[0].thumbnail\r\n      m.name = (marvel[0].name || marvel[0].title)\r\n      promisedMessages.push(m)\r\n    }))\r\n\r\n    this.messages = promisedMessages\r\n    \r\n    clearTimeout(this.timeout)\r\n    this.loadedLists = true\r\n  },\r\n  beforeDestroy() {\r\n    clearTimeout(this.timeout)\r\n  }\r\n}","import { collUsers } from '../services/stitch.js'\r\nimport { uuid } from '../services/utilities.js'\r\n\r\nexport default {\r\n  template: `\r\n    <div id=\"friends-page\" class=\"container\">\r\n    <div class=\"switch\">\r\n      <label>\r\n        Offline\r\n        <input v-model=\"onlineFriends\" type=\"checkbox\">\r\n        <span class=\"lever\"></span>\r\n        Online\r\n      </label>\r\n    </div>\r\n      <h3>{{ onlineFriends ? 'Online' : 'Offline' }}</h3>\r\n\r\n      <div v-if=\"!loadedLists\" class=\"spinner\">\r\n      <div class=\"preloader-wrapper big active\">\r\n        <div class=\"spinner-layer spinner-yellow-only\">\r\n          <div class=\"circle-clipper left\">\r\n            <div class=\"circle\"></div>\r\n          </div><div class=\"gap-patch\">\r\n            <div class=\"circle\"></div>\r\n          </div><div class=\"circle-clipper right\">\r\n            <div class=\"circle\"></div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n      <ul v-else>\r\n        <li v-for=\"friend in filteredFriends\" \r\n          @click=\"sendMarvel(friend.uid)\"\r\n          :key=\"friend.uid\"\r\n          class=\"friend-username\"\r\n        >{{ friend.username }}</li>\r\n      </ul>\r\n    </div>\r\n  `,\r\n  data() {\r\n    return {\r\n      onlineFriends: true,\r\n      friends: [],\r\n      loadedLists: false\r\n    }\r\n  },\r\n  methods: {\r\n    async sendMarvel(toUserId) {\r\n      if(!this.$route.query.toSend) return\r\n      let sendData = {...this.$store.state.dataToSend}\r\n      sendData.receiverId = toUserId\r\n      \r\n      let data = {\r\n        id: uuid(),\r\n        message: sendData,\r\n        notify: {\r\n          title: 'New marvel from ' + this.$store.state.user.username,\r\n          content: 'Check out this new marvel!',\r\n          url: sendData.url\r\n        }\r\n      }\r\n\r\n      if('serviceWorker' in navigator && 'SyncManager' in window) {\r\n        await IDB.write('sync-messages', data)\r\n        const sw = await navigator.serviceWorker.ready\r\n        await sw.sync.register('sync-send-marvel')\r\n      } else {\r\n        this.sendWithoutBackgroundSync(data)\r\n      }\r\n      \r\n      M.toast({\r\n        html: '<div class=\"toast-text\">Sent Marvel</div>', \r\n        classes: 'toast', \r\n        displayLength: 2000\r\n      })      \r\n\r\n      this.$router.push(\"/\")\r\n    },\r\n    async sendWithoutBackgroundSync(data) {\r\n      console.log('Cannot sync messages');\r\n      // No service worker or sync manager\r\n      let res = await fetch('/api/send-message', {\r\n        method: 'POST', \r\n        headers: { 'content-type': 'application/json' },\r\n        body: JSON.stringify(data)\r\n      })\r\n    }\r\n  },\r\n  computed: {\r\n    filteredFriends() {\r\n      return this.friends.filter(friend => friend.isOnline == this.onlineFriends && friend.uid != this.$store.state.user.uid)\r\n    }\r\n  },\r\n  async created() {\r\n    this.$store.commit(\"setLogo\", \"Friends\")\r\n    this.friends = await collUsers.find().asArray()\r\n\r\n    this.loadedLists = true   \r\n  }\r\n}","export default {\r\n  template: `\r\n    <div id=\"search-page\">\r\n      <div class=\"row\">\r\n        <div class=\"input-field search col s10\">\r\n          <i class=\"material-icons prefix\">search</i>\r\n          <input id=\"icon_prefix\" autocomplete=\"off\" @keyup.enter=\"doSearch\" v-model=\"searchTerm\" type=\"text\">\r\n          <label for=\"icon_prefix\">Search</label>\r\n        </div>\r\n        <button class=\"btn-floating btn-large btn-flat\" @click=\"doSearch\"><i class=\"material-icons black-text\">image_search</i></button>\r\n      </div>\r\n\r\n      <ul class=\"seach-history\" @click=\"useSearchHistory\">\r\n        <li v-for=\"item of searchHistory\" :key=\"item.term\">{{ item.term }}</li>\r\n      </ul>\r\n    </div>\r\n  `,\r\n  data() {\r\n    return {\r\n      searchHistory: [],\r\n      searchTerm: ''\r\n    }\r\n  },\r\n  methods: {\r\n    doSearch(){\r\n      if(!this.searchTerm.trim()) return\r\n\r\n      const inList = this.searchHistory.filter(item => item.term == this.searchTerm).length > 0\r\n\r\n      if(!inList) {\r\n        this.searchHistory.push({ \r\n          term: this.searchTerm,\r\n          ts: Date.now()\r\n        })\r\n      } else {\r\n        this.searchHistory.forEach(item => item.term == this.searchTerm && (item.ts = Date.now()))\r\n      }\r\n      localStorage.setItem(\"search-history\", JSON.stringify(this.searchHistory))\r\n      this.$router.push('/search/' + this.searchTerm)\r\n    },\r\n    useSearchHistory(e) {\r\n      this.searchTerm = e.target.innerText\r\n      this.doSearch()\r\n    }\r\n  },\r\n  created() {\r\n    this.$store.commit('setLogo', 'Search')\r\n    this.searchHistory = JSON.parse(localStorage.getItem(\"search-history\")) || []\r\n    this.searchHistory.sort((a, b) => a.ts > b.ts ? -1 : 1)\r\n\r\n    M.updateTextFields()\r\n  }\r\n}","import { getMarvels } from '../services/marvelProvider.js'\r\nimport searchListItem from '../components/searchListItem.js'\r\nimport searchList from '../components/searchList.js'\r\n\r\nexport default {\r\n  components: {\r\n    searchList,\r\n    searchListItem\r\n  },\r\n  template: `\r\n    <div id=\"search-list-page\" class=\"container\">\r\n    <div class=\"switch\">\r\n      <label>\r\n        Series\r\n        <input v-model=\"displayChar\" type=\"checkbox\">\r\n        <span class=\"lever\"></span>\r\n        Characters\r\n      </label>\r\n    </div>\r\n    <div v-if=\"!loadedLists\" class=\"spinner\">\r\n      <div class=\"preloader-wrapper big active\">\r\n        <div class=\"spinner-layer spinner-yellow-only\">\r\n          <div class=\"circle-clipper left\">\r\n            <div class=\"circle\"></div>\r\n          </div><div class=\"gap-patch\">\r\n            <div class=\"circle\"></div>\r\n          </div><div class=\"circle-clipper right\">\r\n            <div class=\"circle\"></div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n      <div v-else>\r\n        <searchList\r\n          :items=\"activeList\"\r\n          :keyField=\"'id'\"\r\n          v-slot=\"{ item }\"\r\n        >\r\n          <searchListItem class=\"list-item\" :data=\"item\" :char=\"displayChar\" />\r\n        </searchList>\r\n      </div>\r\n    </div>\r\n  `,\r\n  data() {\r\n    return {\r\n      displayChar: true,\r\n      loadedLists: false\r\n    }\r\n  },\r\n  computed: {\r\n    activeList() {      \r\n      return this.displayChar ? this.$store.state.characterList : this.$store.state.serieList\r\n    }\r\n  },\r\n  async created() {\r\n    this.$store.commit('setLogo', this.$route.params.term)\r\n    this.timeout = setTimeout(() => {\r\n      M.toast({\r\n        html: '<div class=\"toast-text\">Loading timeout</div>', \r\n        classes: 'toast', \r\n        displayLength: 2000\r\n      })\r\n\r\n      this.$router.push(\"/\")\r\n    }, this.$store.state.timeoutDuration);\r\n    this.$store.commit('setCharList', await getMarvels('characters', this.$route.params.term))\r\n    this.$store.commit('setSerieList', await getMarvels('series', this.$route.params.term))\r\n\r\n    clearTimeout(this.timeout)\r\n    this.loadedLists = true\r\n  },\r\n  beforeDestroy() {\r\n    clearTimeout(this.timeout)\r\n  }\r\n}\r\n","import { getMarvels } from '../services/marvelProvider.js'\r\n\r\nexport default {\r\n  template: `\r\n    <div id=\"details-page\">\r\n      <div class=\"marvel-image\">  \r\n        <img v-if=\"item.thumbnail\" :src=\"item.thumbnail.path.replace('http://', 'https://') + '.' + item.thumbnail.extension\" />\r\n        <button @click=\"sendMarvel\" class=\"send-marvel-btn btn-floating blue darken-3 btn-large waves-effect waves-light\"><i class=\"material-icons\">send</i></button>\r\n        <i @click.stop=\"updateFavorite\" class=\"material-icons\">{{ isFavorited ? 'favorite' : 'favorite_border'}}</i>\r\n      </div>\r\n      <div>\r\n        <h3 class=\"container\">{{ item.name || item.title }}</h3>\r\n        <p class=\"container\">{{ item.description }}</p>\r\n      </div>\r\n    </div>\r\n  `,\r\n  data() {\r\n    return {\r\n      item: {\r\n        name: '',\r\n        description: ''\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    isFavorited() {\r\n      if(!this.$store.state.user) return\r\n\r\n      let isChar = !!this.item.name\r\n      return this.$store.state.user[isChar ? 'favoriteCharacters' : 'favoriteSeries']\r\n        .filter(charID => charID == this.item.id).length > 0\r\n    }\r\n  },\r\n  methods: {\r\n    updateFavorite() {\r\n      let isChar = !!this.item.name\r\n      let list = this.$store.state.user[isChar ? 'favoriteCharacters' : 'favoriteSeries']\r\n      if(this.isFavorited) {\r\n        list.splice(list.indexOf(this.item.id), 1)\r\n      } else {\r\n        !list.includes(this.item.id) && list.push(this.item.id)\r\n      }\r\n      this.$store.dispatch('updateUser')\r\n      this.$emit('updateFavorite', this.item.id)\r\n    },\r\n    sendMarvel() {\r\n      let data = {\r\n        senderId: this.$store.state.user.uid, \r\n        itemId: '' + this.item.id,\r\n        type: this.$route.query.char ? \"character\" : \"serie\",\r\n        senderName: this.$store.state.user.username,\r\n        date: '' + Date.now(),\r\n        url: `/details/${this.item.id}${this.$route.query.char ? '?char=true' : ''}`\r\n      }\r\n\r\n      this.$store.commit('setDataToSend', data)\r\n\r\n      this.$router.push({\r\n        path: '/friends',\r\n        query: {\r\n          toSend: true\r\n        }\r\n      })\r\n    }\r\n  },\r\n  async created() {\r\n    let list = this.$store.state[this.$route.query.char ? 'characterList' : 'serieList']\r\n    let storedData = list.filter(item => item.id == this.$route.params.id)[0]\r\n    if(storedData) {\r\n      this.item = storedData\r\n      return\r\n    } \r\n\r\n    this.timeout = setTimeout(() => {\r\n      M.toast({\r\n        html: '<div class=\"toast-text\">Loading timeout</div>', \r\n        classes: 'toast', \r\n        displayLength: 2000\r\n      })\r\n\r\n      this.$router.push(\"/\")\r\n    }, this.$store.state.timeoutDuration);\r\n    \r\n    this.result = await getMarvels(this.$route.query.char ? 'characters' : 'series', '', this.$route.params.id)\r\n    this.item = this.result[0]\r\n\r\n    clearTimeout(this.timeout)\r\n    this.$store.commit(\"setLogo\", (this.item.name || this.item.title))\r\n  }\r\n}","import { urlBase64ToUint8Array } from './utilities.js'\r\nimport { client } from './stitch.js'\r\n\r\nexport async function subToNotifications() {\r\n  if('Notification' in window) {\r\n    Notification.requestPermission(async result => {\r\n      if(result !== 'granted') {\r\n        console.log('No notifications permitted!')\r\n      } else {\r\n        await configPushSub()\r\n      }\r\n    })\r\n  }\r\n}\r\n\r\nasync function configPushSub() {\r\n  if(!('serviceWorker' in navigator)) return\r\n  const sw = await navigator.serviceWorker.ready\r\n  const subs = await sw.pushManager.getSubscription()\r\n\r\n  if(subs == null) {\r\n    // create sub\r\n  \r\n    let publicKey = 'BAvY4M_56t_c_9SoNEIkxjjEcc_V55gO2Cm7GPZNHKwTZu2tHcXFiDScshESK29z_tT97I2MLOgNYQIhmyC-SDA'\r\n    publicKey = urlBase64ToUint8Array(publicKey)\r\n    let newSub = await sw.pushManager.subscribe({\r\n      userVisibleOnly: true,\r\n      applicationServerKey: publicKey\r\n    })\r\n\r\n    let res = await fetch('/api/subscriptions', {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify({\r\n        newSub,\r\n        userId: client.auth.user.id\r\n      })\r\n    })\r\n    res = await res.json()\r\n    console.log('sub id:', res.subId);\r\n    \r\n    await IDB.write('user-data', {\r\n      uid: 'sub-id',\r\n      id: res.subId\r\n    })\r\n  } else {\r\n    // have sub\r\n    // swNotification()\r\n  }\r\n}\r\n\r\nasync function swNotification() {\r\n  if('serviceWorker' in navigator) {\r\n    const sw = await navigator.serviceWorker.ready\r\n    const options = {\r\n      body: 'Test text in notification',\r\n      icon: '/src/assets/icons/icon-96x96.png',\r\n      badge: '/src/assets/icons/icon-96x96.png',\r\n      tag: 'new-message-notify',\r\n      renotify: false,\r\n      data: {\r\n        url: '/'\r\n      }\r\n    }\r\n    sw.showNotification('Notification from service worker', options)\r\n  }\r\n}","import { client, collUsers, collSubs } from '../services/stitch.js'\r\nimport { subToNotifications } from '../services/notifications.js'\r\n\r\nexport default {\r\n  template: `\r\n    <div id=\"login-page\" class=\"container\" autocomplete=\"off\">\r\n      <h1 class=\"marvel-logo\">Marvellisimo</h1>\r\n      <div class=\"input-field\">\r\n        <input id=\"username\" placeholder=\"Username\" v-model=\"username\" type=\"text\" class=\"validate\">\r\n      </div>\r\n      <div class=\"input-field\">\r\n        <input id=\"email\" placeholder=\"Email\" v-model=\"email\" type=\"email\" class=\"validate\">\r\n      </div>\r\n      <div class=\"input-field\">\r\n        <input id=\"password\" @keyup.enter.prevent.stop=\"login()\" placeholder=\"Password\" v-model=\"password\" type=\"password\" class=\"validate\">\r\n      </div>\r\n      <div class=\"login-buttons\">\r\n        <button class=\"btn\" @click.prevent.stop=\"login()\">login</button>\r\n        <button class=\"btn\" @click.prevent.stop=\"register()\">register</button>\r\n      </div>\r\n      <div v-if=\"loggingIn\" class=\"spinner login-spinner\">\r\n      <div class=\"preloader-wrapper big active\">\r\n        <div class=\"spinner-layer spinner-yellow-only\">\r\n          <div class=\"circle-clipper left\">\r\n            <div class=\"circle\"></div>\r\n          </div><div class=\"gap-patch\">\r\n            <div class=\"circle\"></div>\r\n          </div><div class=\"circle-clipper right\">\r\n            <div class=\"circle\"></div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    </div>\r\n  `,\r\n  data() {\r\n    return {\r\n      username: '',\r\n      email: '',\r\n      password: '',\r\n      loggingIn: false\r\n    }\r\n  },\r\n  methods: {\r\n    async login(registered) {\r\n      this.loggingIn = true\r\n      const { UserPasswordCredential } = stitch\r\n\r\n      const credential = new UserPasswordCredential(this.email, this.password)\r\n      const user = await client.auth.loginWithCredential(credential)\r\n      .catch(err => {\r\n        this.loggingIn = false\r\n        M.toast({\r\n          html: '<div class=\"toast-text\">Bad username/password</div>', \r\n          classes: 'toast', \r\n          displayLength: 2000\r\n        })\r\n        console.error(err)\r\n      })\r\n    \r\n      console.log(\"Signed in user:\", user)\r\n      let result;\r\n\r\n      if(registered) {\r\n        result =  await this.createNewUser(user.id)\r\n      } else {\r\n        result = await collUsers.findOne({ uid: client.auth.user.id })\r\n        .catch(err => {\r\n          console.error(err)\r\n        })\r\n        console.log(\"Found user:\", result)\r\n\r\n        result.isOnline = true\r\n        result && await collUsers.findOneAndReplace({ uid: result.uid }, result).catch(console.error)\r\n      }\r\n      \r\n      this.$store.commit('setUser', result)\r\n      this.$router.replace(\"/\")\r\n\r\n      await subToNotifications()\r\n      let idbSub = await IDB.read('user-data', 'sub-id')\r\n      if(idbSub) {\r\n        let sub = await collSubs.findOne({ uid: idbSub.id })\r\n        if(!sub.userIds.includes(client.auth.user.id)) sub.userIds.push(client.auth.user.id)\r\n        await collSubs.findOneAndReplace({ uid: idbSub.id }, sub).catch(console.error)\r\n      }\r\n    },\r\n    async register() {\r\n      const { UserPasswordAuthProviderClient } = stitch\r\n\r\n      const emailPasswordClient = client.auth.getProviderClient(UserPasswordAuthProviderClient.factory);\r\n    \r\n      const result = await emailPasswordClient.registerWithEmail(this.email, this.password)\r\n      .catch(err => {\r\n        M.toast({\r\n          html: '<div class=\"toast-text\">Bad username/password</div>', \r\n          classes: 'toast', \r\n          displayLength: 2000\r\n        })\r\n        console.error(\"Error registering new user:\", err)\r\n        return\r\n      })\r\n\r\n      M.toast({\r\n        html: '<div class=\"toast-text\">Successfully registered</div>', \r\n        classes: 'toast', \r\n        displayLength: 2000\r\n      })\r\n\r\n      this.login(true)\r\n    },\r\n    async createNewUser(id) {      \r\n      const newUser = {\r\n        _id: new stitch.BSON.ObjectId(id),\r\n        uid: id,\r\n        username: this.username,\r\n        email: this.email,\r\n        isOnline: true,\r\n        favoriteSeries: [],\r\n        favoriteCharacters: []\r\n      }\r\n\r\n      return await collUsers.insertOne(newUser)\r\n      .catch(err => {\r\n        console.error(\"Error creating new user:\", err)\r\n      })\r\n    }\r\n  },\r\n  created() {\r\n    console.log('Mounting LoginPage');\r\n    \r\n    if(client.auth.isLoggedIn) {\r\n      this.$router.replace(\"/\")\r\n    }\r\n  },\r\n  mounted() {\r\n    M.updateTextFields()\r\n  }\r\n}","export default {\r\n  template: `\r\n    <div id=\"missing-page\" class=\"container\">\r\n      <div class=\"row\">\r\n        <div class=\"one-half column\">\r\n          <h4>Missing Page</h4>\r\n          <p>Can't find the page: ${location.pathname}</p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  `,\r\n  created() {\r\n    this.$store.commit(\"setLogo\", \"Marvellisimo\")\r\n  },\r\n}\r\n","import homePage from '../views/homePage.js'\r\nimport favoritesPage from '../views/favoritesPage.js'\r\nimport receivedMessagesPage from '../views/receivedMessagesPage.js'\r\nimport friendsPage from '../views/friendsPage.js'\r\nimport searchPage from '../views/searchPage.js'\r\nimport searchListPage from '../views/searchListPage.js'\r\nimport detailsPage from '../views/detailsPage.js'\r\nimport loginPage from '../views/loginPage.js'\r\nimport missingPage from \"../views/missingPage.js\";\r\n\r\nexport const router = new VueRouter({\r\n  mode: 'history',\r\n  routes: [\r\n    {\r\n      name:\"home\",\r\n      path: '/', \r\n      component: homePage\r\n    },\r\n    {\r\n      name: \"favorites\",\r\n      path: '/favorites', \r\n      // component: () => import('../views/favoritesPage.js')\r\n      component: favoritesPage\r\n    },\r\n    {\r\n      name: \"login\",\r\n      path: '/login', \r\n      component: loginPage\r\n    },\r\n    {\r\n      name: \"receivedMessages\",\r\n      path: '/received-messages', \r\n      // component: () => import('../views/recievedMessagesPage.js')\r\n      component: receivedMessagesPage\r\n    },\r\n    {\r\n      name: \"friends\",\r\n      path: '/friends', \r\n      // component: () => import('../views/friendsPage.js')\r\n      component: friendsPage\r\n    },\r\n    {\r\n      name: \"searchPage\",\r\n      path: '/search', \r\n      // component: () => import('../views/searchPage.js')\r\n      component: searchPage\r\n    },\r\n    {\r\n      name: \"searchListPage\",\r\n      path: '/search/:term', \r\n      // component: () => import('../views/searchListPage.js')\r\n      component: searchListPage\r\n    },\r\n    {\r\n      name: \"detailsPage\",\r\n      path: '/details/:id', \r\n      // component: () => import('../views/detailsPage.js'),\r\n      component: detailsPage,\r\n      params: true\r\n    },\r\n    {\r\n      path: '*',\r\n      component: missingPage,\r\n    }\r\n  ]\r\n});","import { collUsers } from '../services/stitch.js'\r\n\r\nexport const store = new Vuex.Store({\r\n  state: {\r\n    timeoutDuration: 1000 * 5,\r\n    user: null,\r\n    logo: 'Marvellisimo',\r\n    characterList: [],\r\n    serieList: [],\r\n    isMobile: true,\r\n    dataToSend: null\r\n  },\r\n  mutations: {\r\n    setDataToSend(state, data) {\r\n      state.dataToSend = data\r\n    },\r\n    setMobile(state, mobile) {\r\n      state.isMobile = mobile\r\n    },\r\n    async setUser(state, user) {\r\n      state.user = {...user}\r\n      user && await IDB.write('user-data', user)\r\n\r\n      user && await IDB.write('user-data', {\r\n        uid: 'active-user',\r\n        id: user.uid || ''\r\n      })\r\n      localStorage['active-user'] = user.uid || ''\r\n    },   \r\n    setLogo(state, logo) {\r\n      state.logo = logo\r\n    },\r\n    setCharList(state, list) {\r\n      state.characterList = [...list]\r\n    },\r\n    setSerieList(state, list) {\r\n      state.serieList = [...list]\r\n    }\r\n  },\r\n  actions: {\r\n    async updateUser(store) {\r\n      store.state.user && await collUsers.findOneAndReplace({ uid: store.state.user.uid }, store.state.user).catch(console.error)\r\n      store.commit('setUser', store.state.user)\r\n    }\r\n  }\r\n})\r\n","import { client, collUsers } from '../services/stitch.js'\r\n\r\nexport default {\r\n  template: `\r\n  <div class=\"navbar-fixed\">\r\n    <nav class=\"nav-wrapper\">\r\n      <router-link v-if=\"showBackArrow\" to=\"/\"><i class=\"material-icons\">arrow_back</i></router-link>\r\n      <p v-else id=\"arrow-placeholder\"></p>\r\n      <h5>{{ $store.state.logo }}</h5>\r\n      <i class=\"material-icons\" @click=\"signOut()\">exit_to_app</i>\r\n    </nav>\r\n  </div>\r\n  `,\r\n  computed: {\r\n    showBackArrow() {\r\n      return this.$route.path != '/' && this.$route.path != '/login'\r\n    }\r\n  },\r\n  methods: {\r\n    async signOut() {\r\n      this.$store.state.user && (this.$store.state.user.isOnline = false)\r\n      this.$store.state.user && await collUsers.findOneAndReplace(\r\n        { uid: this.$store.state.user.uid },\r\n         this.$store.state.user\r\n        ).catch(console.error)\r\n\r\n      client.auth.logout()\r\n      this.$store.commit('setUser', null)\r\n      M.toast({\r\n        html: '<div class=\"toast-text\">Successfully signed out</div>', \r\n        classes: 'toast', \r\n        displayLength: 2000\r\n      })\r\n      this.$router.push(\"/login\")\r\n    }\r\n  }\r\n}","import navbar from './components/navbar.js'\r\nimport { client, collUsers } from './services/stitch.js'\r\n\r\nexport default {\r\n  components: {\r\n    navbar,\r\n  },\r\n  template: `\r\n    <div id=\"app\">\r\n      <navbar />\r\n      <main>\r\n        <transition enter-active-class=\"animated slideInUp\" mode=\"out-in\">  \r\n          <router-view class=\"animation-speed\" :key=\"$route.fullPath\" />\r\n        </transition>\r\n      </main>\r\n    </div>\r\n  `,\r\n  async created() {\r\n    M.AutoInit()\r\n\r\n    if(!client.auth.isLoggedIn) {\r\n      this.$router.replace(\"/login\")\r\n      return\r\n    } \r\n\r\n    let user = await IDB.read('user-data', client.auth.user.id)\r\n    console.log(user);\r\n    \r\n    this.$store.commit('setUser', user)\r\n\r\n    setTimeout(async () => {\r\n      user = await collUsers.findOne({ uid: client.auth.user.id }).catch(e => {\r\n        M.toast({\r\n          html: `\r\n            <div class=\"bottom-toast-text\">\r\n              <i class=\"material-icons\">signal_wifi_off</i>\r\n              You're currently offline\r\n            </div>\r\n          `, \r\n          classes: 'bottom-toast', \r\n          displayLength: Infinity\r\n        })\r\n        return\r\n      })\r\n      if(!user) return\r\n      this.$store.commit('setUser', user)\r\n      user.isOnline = true\r\n      user && await collUsers.findOneAndReplace({ uid: user.uid }, user).catch(console.error)\r\n      M.toast({\r\n        html: '<div class=\"toast-text\">Successfully signed in</div>', \r\n        classes: 'toast', \r\n        displayLength: 2000\r\n      })\r\n    }, 50);\r\n\r\n    this.checkMobile()\r\n    window.addEventListener(\"resize\", () => {\r\n      this.checkMobile()\r\n     })\r\n  },\r\n  methods: {\r\n    checkMobile() {\r\n      const os = navigator.userAgent;\r\n      const isMobile = os.includes('Android') || os.includes('iPhone') || window.innerWidth < 768;\r\n      const f = isMobile ? 'add' : 'remove';\r\n      document.body.classList[f](\"mobile\");\r\n      this.$store.commit('setMobile', isMobile)\r\n    }\r\n  }\r\n}\r\n","import './services/registerServiceWorker.js'\r\nimport './services/stitch.js'\r\nimport { router } from './router/index.js'\r\nimport { store } from './store/index.js'\r\nimport app from './app.js'\r\n\r\nexport const eventBus = new Vue()\r\n\r\nnew Vue({\r\n  store,\r\n  router,\r\n  render: h => h(app)\r\n}).$mount('#app')\r\n\r\n\r\nwindow.addEventListener('online', () => {\r\n  console.log(\"You are now back online.\");\r\n  let toastElement = document.querySelector('.bottom-toast');\r\n  let toastInstance = M.Toast.getInstance(toastElement);\r\n  toastInstance.dismiss();\r\n});\r\n\r\nwindow.addEventListener('offline', () => {\r\n  console.log(\"You lost connection.\");\r\n  M.toast({\r\n    html: `\r\n      <div class=\"bottom-toast-text\">\r\n        <i class=\"material-icons\">signal_wifi_off</i>\r\n        You're currently offline\r\n      </div>\r\n    `, \r\n    classes: 'bottom-toast', \r\n    displayLength: Infinity\r\n  })\r\n});"],"sourceRoot":""}